webpackJsonp([1],[function(t,e,n){"use strict";var o,i;n(99),n(98),i=n(91),n(17),n(1),n(77),n(27),o=angular.element(document.querySelectorAll(".app-container")).scope(),null==o&&angular.bootstrap(document,["app"])},,function(t,e,n){"use strict";n(1),angular.module("app").service("gameSettingsService",n(56)),t.exports="gameSettingsService"},function(t,e,n){"use strict";n(1),angular.module("app").service("utils",n(60)),t.exports="utils"},function(t,e,n){"use strict";n(1),angular.module("app").service("gameUtils",n(57)),t.exports="gameUtils"},function(t,e,n){"use strict";n(78),n(102),n(30)},function(t,e,n){"use strict";n(41),n(16),n(80),n(104),n(33)},function(t,e,n){"use strict";n(1),angular.module("app").service("GameManagerService",n(55)),t.exports="GameManagerService"},function(t,e,n){"use strict";n(1),angular.module("app").service("WatcherService",n(61)),t.exports="WatcherService"},,,,,,,function(t,e,n){"use strict";n(81),n(105),n(34),n(35)},function(t,e,n){"use strict";n(82),n(106),n(36)},,,,,,,,,function(t,e){"use strict";var n,o,i;n="abcdefghijklmnopqrstuvwxyz",i={COLORS:["red","blue","green","yellow"],TYPES:["square","circle","diamond","triangle"],SIZE:18,BORDER:3},i.MARGIN=2*i.SIZE,i.OUTERSIZE=i.SIZE+i.MARGIN,o={SIZE:5,DIMENSIONS:{},MARGIN:{top:i.MARGIN,left:i.MARGIN}},o.DIMENSIONS={w:o.SIZE*i.OUTERSIZE+o.MARGIN.left,h:o.SIZE*i.OUTERSIZE+o.MARGIN.top},t.exports={ALPHABET:n,BOARD:o,SHAPE:i,LEVELS:{DEFAULT:{name:"easy"},DEV:{label:"Dev Mode",min:3,max:3,timer:4},EASY:{label:"Beginner",min:4,max:7,timer:60},MEDIUM:{label:"Intermediate",min:8,max:11,timer:45},HARD:{label:"Advanced",min:12,max:14,timer:30},INSANE:{label:"Master",min:15,max:17,timer:15}},TUTORIAL_STEPS:{total:4,success:{header1:"Woot! You've successfully completed the tutorial.",playBtnLabel:"Start Playing",headerPosition:"top"},1:{header1:"Connect two of the same shapes",header2:"Try it yourself by dragging or clicking!",headerPosition:"top",showGoal:!1,random:!1,shapes:[{color:"yellow",type:"diamond"},{color:"green",type:"diamond"}]},2:{header1:"You can also connect the same colors",headerPosition:"top",showGoal:!1,random:!1,shapes:[{color:"red",type:"triangle"},{color:"red",type:"circle"}]},3:{header1:"Next connect the #{startNode} to a #{endNode}",header2:"Note: You cannot move at a diagonal",headerPosition:"top",showGoal:!0,showMovesLeft:!1,makeUnique:!0,random:!0,boardSize:2,pathSize:3},4:{header1:"Now connect a #{startNode} to a #{endNode} in exactly 3 moves",header2:"Made a mistake? Drag or click backwards to undo moves!",headerPosition:"bottom",showGoal:!0,showMovesLeft:!0,makeUnique:!0,random:!0,boardSize:4,pathSize:4}},GAME_TYPES:{options:["freeplay","timed"],"default":"freeplay"},HEXCOLORS:{white:"#FFFFFF",red:"#FF5252",blue:"#4B9CFF",green:"#8BCA22",yellow:"#E5D235",teal:"#8AE8B2"}}},function(t,e){"use script";app.filter("ordinal",function(){return function(t){var e;return e=function(){switch(!1){case 1!==t:return"st";case 2!==t:return"nd";case 3!==t:return"rd";default:return"th"}}(),t+e}})},function(t,e,n){"use strict";var o,i;i=n(101),o=n(25),window.app=angular.module("app",[n(9),n(10),n(13),n(12),n(11),n(14),"ngStorage","app.about","app.home","app.play","app.tutorial"]).constant("ALPHABET",o.ALPHABET).constant("LEVELS",o.LEVELS).constant("TUTORIAL_STEPS",o.TUTORIAL_STEPS).constant("GAME_TYPES",o.GAME_TYPES).constant("HEXCOLORS",o.HEXCOLORS).constant("BOARD",o.BOARD).constant("SHAPE",o.SHAPE).config(n(28)).run(n(29)),n(26),n(66),n(69),n(70),n(73)},function(t,e,n){"use strict";var o,i;o=["$stateProvider","$urlRouterProvider","$locationProvider"],i=function(t,e,n){e.otherwise("/"),n.html5Mode(!0),e.rule(function(t,e){var n,o;return o=e.path(),n="/"===o[o.length-1],n?void 0:o+="/"})},i.$inject=o,t.exports=i},function(t,e,n){"use strict";var o,i;o=["$rootScope","$location","$timeout","$state","$localStorage",n(62),n(48)],i=function(t,e,n,o,i,s,a){var r;t.windowEvents=new s,a.downloadAll().then(function(t){return function(){return r()}}(this)),null==i.firstVisited&&(i.firstVisited=new Date,i.hasCompletedTutorial=!1),r=function(){return $(window).on("click",function(t){var e;return e=t,a.playSound("background"),$(window).off("click")})},t.windowEvents.onFocus(r),t.windowEvents.onBlur(function(){return a.pauseSound("background")}),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return n(t,1)},window.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,Array.prototype.findIndex||(Array.prototype.findIndex=function(t){var e,n,o,i,s;if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(o=Object(this),n=o.length>>>0,i=arguments[1],s=void 0,e=0;n>e;){if(s=o[e],t.call(i,s,e,o))return e;e++}return-1})},i.$inject=o,t.exports=i},function(t,e,n){"use strict";angular.module("app").directive("scCanvas",["$log","SHAPE",n(50),function(t,e,n){return{templateUrl:"components/canvas/canvas.html",restrict:"E",scope:{name:"@",size:"@",classes:"@?",canvas:"=?",events:"=?"},link:function(t,e,o){var i,s,a,r,c,l,u,d,h,p;return t.canvasName="canvas-"+t.name,i=e.find("canvas"),a=i[0],r=null,s=null,l=!0,u=function(){return"object"!=typeof t.size&&(t.size=JSON.parse(t.size)),h("width"),h("height"),r=a.getContext("2d"),r.scale(2,2),d(),l?(l=!1,c.bind()):void 0},h=function(e){return a[e]=2*t.size[e],a.style[e]=t.size[e]+"px"},d=function(){return s={$el:i,el:a,ctx:r,draw:new n(r)},t.canvas=s},c={bind:function(){return null!=t.events?(null!=t.events.start&&(s.el.addEventListener("touchstart",this.start,!1),s.$el.on("mousedown",function(t){return function(e){return t.start(e,!0)}}(this))),null!=t.events.move&&(s.el.addEventListener("touchmove",this.move,!1),s.$el.on("mousemove",function(t){return function(e){return t.move(e,!0)}}(this))),null!=t.events.end&&(s.el.addEventListener("touchend",this.end,!1),s.el.addEventListener("touchleave",this.end,!1),document.body.addEventListener("mouseup",function(t){return function(e){return t.end(e,!0)}}(this),!1)),null!=t.events.cancel?document.body.addEventListener("touchcancel",this.cancel,!1):void 0):void 0},unbind:function(){return s.$el.off("mousedown").off("mousemove").off("mouseup"),s.el.removeEventListener("touchstart",this.start,!1),s.el.removeEventListener("touchmove",this.move,!1),s.el.removeEventListener("touchend",this.end,!1),s.el.removeEventListener("touchleave",this.end,!1),s.el.removeEventListener("touchcancel",this.cancel,!1),document.body.removeEventListener("touchcancel",this.cancel,!1),document.body.removeEventListener("mouseup",function(t){return function(e){return t.end(e,!0)}}(this),!1)},process:function(e){return function(e,n,o){var i,s;return s=o?"mouse":"touch","function"==typeof(i=t.events)[e]?i[e](n,{start:"start"===e,type:s,eventType:e}):void 0}}(this),start:function(t,e){return c.process("start",t,e)},move:function(t,e){return c.process("move",t,e)},end:function(t,e){return c.process("end",t,e)},cancel:function(t,e){return c.process("cancel",t,e)}},p=t.$watch("size",function(t){return null!=t?u():void 0}),t.$on("$destroy",function(){return c.unbind()})}}}])},function(t,e,n){"use strict";angular.module("app").directive("scGame",["$rootScope","$log","LEVELS","BOARD","SHAPE",n(7),n(8),function(t,e,n,o,i,s,a){return{templateUrl:"components/game/game.html",restrict:"E",scope:{sourceGame:"=?",gameType:"@?type",difficulty:"@?",attempts:"=?",modalShown:"=?",triggerGamePause:"=?pauseGame",onNewGame:"&?",onResetGame:"&?",onQuitGame:"&?"},link:function(e,r,c){var l,u,d,h,p,m,f,v,g,y,w,S;h=null,u=$(window),l=r.find(".game-header"),S=new a(e),e.showWinModal=!1,e.showLoseModal=!1,e.showPauseModal=!1,e.isFirstInit=!0,w={calcGameWidth:function(){var t;return t=o.DIMENSIONS.w+150,u.width()<t&&(t=u.width()-30),t},calcGameTopMargin:function(){var t,e,n,s;return s=window.innerHeight/2,t=o.DIMENSIONS.h/2,e=window.innerHeight>650?i.OUTERSIZE+10:0,n=s-e-t,100>n&&(n=100),n}},f=function(){return null==e.difficulty&&(e.difficulty=n.DEFAULT.name),e.canvasCollection={},e.canvasDimensions={goal:{width:o.DIMENSIONS.w,height:i.OUTERSIZE},timer:{width:i.OUTERSIZE,height:i.OUTERSIZE},board:{width:o.DIMENSIONS.w,height:o.DIMENSIONS.h}},e.gameCanvasEvents={start:d.onStart,move:d.onMove,end:d.onEnd,cancel:d.onCancel}},v=function(){h=s.init({scope:{$scope:e,namespace:"game"},settings:{mode:e.gameType,difficulty:e.difficulty},render:{canvas:e.canvasCollection,board:e.sourceGame}}),m(),p(),h.start(),e.attempts+=1,t.windowEvents.onBlur(d.onBlur),u.on("resize",d.onResize)},m=function(){return null==e.sourceGame?e.sourceGame=angular.copy(h.cacheGameBoard):void 0},p=function(){var t,e;return t=r.find(".game"),e=t.find(".game-board"),t.css({width:w.calcGameWidth(),marginTop:w.calcGameTopMargin()}),e.css({height:o.DIMENSIONS.h,width:o.DIMENSIONS.w})},d={onStart:function(t,n){return e.$apply(function(e){return function(){return h.onStartEvent(t,n)}}(this))},onMove:function(t,n){return e.$apply(function(e){return function(){return h.onMoveEvent(t,n)}}(this))},onEnd:function(){return e.$apply(function(t){return function(){return h.onEndEvent()}}(this))},onCancel:function(){return e.$apply(function(t){return function(){return h.onCancelEvent()}}(this))},onResize:function(){return p()},onBlur:function(){return e.$apply(function(t){return function(){return e.actions.pauseGame()}}(this))}},e.actions={newGame:function(){return"function"==typeof e.onNewGame?e.onNewGame({params:!0}):void 0},resetGame:function(){return"function"==typeof e.onResetGame?e.onResetGame({params:h.cacheGameBoard}):void 0},quitGame:function(t){return"function"==typeof e.onQuitGame?e.onQuitGame({params:{route:t}}):void 0},pauseGame:function(){return h.gameOver===!1&&(h.pauseGame(),"share"!==e.modalShown)?(e.showPauseModal=!0,e.modalShown="pause"):void 0},resumeGame:function(t){null==t&&(t=!1),h.resumeGame(),e.triggerGamePause=!1,e.showPauseModal=!1,e.modalShown="",t&&e.$apply()}},f(),y=S.start("canvasCollection",function(t){return null!=(null!=t?t.game:void 0)?(y(),v(),g(),e.isFirstInit=!1):void 0}),g=function(){var t;return S.start(function(){return h.won},function(t){return e.showWinModal=t===!0,e.modalShown="win"}),S.start(function(){return h.lost},function(t){return e.showLoseModal=t===!0,e.modalShown="lose"}),t=S.start("triggerGamePause",function(t,n){return e.triggerGamePause===!0&&((null!=h?h.gameOver:void 0)===!0?e.actions.quitGame():e.actions.pauseGame()),n===!0&&t===!1&&"share"===e.modalShown?(e.modalShown="",e.actions.resumeGame(!1)):void 0})},e.$on("$destroy",function(){return null!=h?h.destroy():void 0})}}}])},function(t,e,n){"use strict";n(5),n(15),n(16),n(79),n(103),n(31)},function(t,e,n){"use strict";angular.module("app").directive("appHeader",["$log","$state",n(2),function(t,e,n){return{templateUrl:"components/header/header.html",restrict:"E",scope:{onClick:"&?",onShareEvent:"&?",shareOpts:"=?",showLogo:"@?",showShare:"@?",showMenu:"@?",showSounds:"@?"},transclude:!0,link:function(t,o,i){return null==t.showLogo&&(t.showLogo="true"),t.showAppLogo="true"===t.showLogo,t.showShareLink="true"===t.showShare,t.showMenuIcon="true"===t.showMenu,t.showSoundsIcon="true"===t.showSounds,t.showSoundsModal=!1,t.isMusicOn=n.allowMusic||n.allowSounds,t.onLogoClick=function(n){null!=t.onClick?t.onClick({params:n}):e.go("home")},t.shareEvent=function(e){return t.onShareEvent({params:e})},t.openSoundsModal=function(){return t.showSoundsModal=!0},t.onSoundsModalEvent=function(){return t.isMusicOn=n.allowMusic||n.allowSounds}}}}])},function(t,e){"use strict";angular.module("app").animation(".modal",["$log","$rootScope","$timeout",function(t,e,n){var o,i,s,a,r,c,l;return l="js-modal-animate-visibility",s="js-modal-animate-minimize",o=function(t){var e,n,o;return n=$(t),o=n.find(".modal-overlay"),e=n.find(".modal-content"),[n,e,o]},r=function(t){$("body").css({overflow:t}),$(".app-container").css({overflow:t}),$(".modal").css({overflow:t})},a=function(t,n){var i,s,a,c,l;l=o(t),s=l[0],i=l[1],a=l[2],s.show(),a.css({opacity:"1"}),i.css({top:"0%"}),c=$(window).height()-70,a.animate({opacity:"0"},{duration:350,queue:!1,complete:function(){return a.css({opacity:"0"})}}),i.animate({marginTop:c,width:"100%"},{duration:500,queue:!1,complete:function(){return i.css({marginTop:c,width:"100%"}),s.addClass("minimized"),r("auto"),e.$broadcast("modal-animations-done",{type:"modal-minimized",$el:s}),n()}})},c=function(t,n){var i,s,a,c;c=o(t),s=c[0],i=c[1],a=c[2],r("hidden"),s.hide(),a.css({opacity:"0"}),i.css({top:"100%"}),s.show(),a.animate({opacity:"1"},{duration:400,queue:!1,complete:function(){return a.css({opacity:"1"})}}),i.animate({top:"0%"},{duration:500,queue:!1,complete:function(){return s.show(),i.css({top:"0%"}),window.scrollTo(0,0),e.$broadcast("modal-animations-done",{type:"modal-shown",$el:s}),n()}})},i=function(t,n){var i,s,a,c;c=o(t),s=c[0],i=c[1],a=c[2],s.show(),a.css({opacity:"1"}),i.css({top:"0%"}),a.animate({opacity:"0"},{duration:350,queue:!1,complete:function(){return a.css({opacity:"0"})}}),i.animate({top:"100%"},{duration:400,queue:!1,complete:function(){return s.hide(),i.css({top:"100%"}),r("auto"),e.$broadcast("modal-animations-done",{type:"modal-hidden",$el:s}),n()}})},{addClass:function(t,e,n){e.indexOf(l)>=0?c(t,n):e.indexOf(s)>=0?a(t,n):n()},removeClass:function(t,e,n){e.indexOf(l)>=0?i(t,n):n()}}}])},function(t,e,n){"use strict";angular.module("app").directive("scModal",["$log","BOARD",n(3),function(t,e,n){return{templateUrl:"components/modal/modal.html",transclude:!0,restrict:"E",scope:{name:"@?",showModal:"=?show",style:"@?",forceHeight:"@?height",forceWidth:"@?width",position:"@?"},controller:["$scope","$element","$transclude",function(t,e,n){return this.minimize=function(){return t.minimizeModal=!0},this.close=function(){return t.showModal=!1},this.show=function(){return t.showModal=!1},this.getIsAnimating=function(){return t.isAnimating},n(function(t){var n,o,i;return n=e.find(".modal-content"),o=e.find(".modal-minimized"),i=t,angular.forEach(i,function(t){return angular.element(t).hasClass("scmodal-minimized-content")?o.append(t):n.append(t)})}),this}],link:function(t,n,o){var i,s,a,r,c,l;r=$(window),s=$(".game-board"),a=n.find(".modal"),i=a.find(".modal-content"),l=new(c=function(){function n(){t.minimizeModal=!1,t.isAnimating=!1}return n.prototype.show=function(){this.positionModal(),t.animateVisibility="js-modal-animate-visibility",t.isAnimating=!0},n.prototype.hide=function(){t.animateVisibility="",t.isAnimating=!0},n.prototype.minimize=function(){t.animateMinimize="js-modal-animate-minimize",t.isAnimating=!0},n.prototype.positionModal=function(){var n,o,a,c;n=r.height(),a=345,475>n?(a=e.DIMENSIONS.h,i.removeClass("size-large"),i.addClass("size-normal")):(i.removeClass("size-normal"),i.addClass("size-large")),null!=t.forceHeight&&(a=t.forceHeight,i.removeClass("size-large"),i.removeClass("size-normal")),c=null!=t.forceWidth?t.forceWidth:e.DIMENSIONS.w-e.MARGIN.left,o=function(){switch(!1){case"over-game"!==t.position:return s.offset().top;case"top"!==t.position:return 0;case"center"!==t.position:return(n-a)/2;default:return s.offset().top}}(),i.css({width:c,height:a,marginTop:o})},n.prototype.showModalWatch=function(t,e){t!==e&&(t===!0&&l.show(),t===!1&&l.hide())},n.prototype.minimizeModalWatch=function(t,e){t!==e&&t===!0&&l.minimize()},n.prototype.onAnimationDone=function(e,n){t.name===n.$el.data("name")&&t.$apply(function(){return t.isAnimating=!1})},n}()),r.on("resize",l.positionModal),t.$watch("showModal",l.showModalWatch),t.$watch("minimizeModal",l.minimizeModalWatch),t.$on("modal-animations-done",l.onAnimationDone)}}}]),app.directive("scModalAction",["$log","$parse","$timeout",function(t,e,n){return{require:"^scModal",restrict:"A",link:function(t,o,i,s){var a,r,c,l,u,d,h;a=s[i.scModalAction],null!=i.onComplete?(l=!0,c=e(i.onComplete)):l=!1,r=null!=i.noDelay?0:400,d=!1,h=null,u=function(e){return null!=a?t.$apply(function(){return a(),d=!0,h=e}):void 0},$(o).on("click",u),t.$watch(function(){return s.getIsAnimating()},function(e){d&&!e&&l&&n(function(){return d=!1,h=null,c(t,{e:h})})})}}}])},function(t,e,n){"use strict";angular.module("app").directive("scNoiseToggles",["$log","assets",n(2),function(t,e,n){return{templateUrl:"components/noiseToggles/noiseToggles.html",restrict:"E",scope:!0,link:function(t,o,i){return t.noises={sounds:{label:"Sound",allowed:n.getAllowSounds()},music:{label:"Music",allowed:n.getAllowMusic()}},t.toggleNoise=function(o){t.noises[o].allowed=n.toggle(o),"music"===o&&(t.noises[o].allowed===!0?e.playSound("background"):e.pauseSound("background"))}}}}])},function(t,e,n){"use strict";n(38)},function(t,e){"use strict";app.directive("recompiler",["$log","$parse",function(t,e){return{restrict:"A",transclude:!0,link:function(t,n,o,i,s){var a,r;return a=null,r={run:function(){return this.clean(),this.compile()},compile:function(){return s(t,function(t){return a=t,"fadeIn"===o.animate?n.hide().append(t).fadeIn(300):n.append(t)})},clean:function(){return null!=a?(a.remove(),a=null,n.empty()):void 0}},t.$watch(o.recompiler,function(n){return null!=n&&"false"!==n&&n!==!1?(e(o.recompiler).assign(t,!1),r.run()):void 0})}}}])},function(t,e,n){"use strict";n(83),n(107),n(40)},function(t,e,n){"use strict";angular.module("app").directive("selectbox",["$log","$timeout",n(3),function(t,e,n){return{templateUrl:"components/selectbox/selectbox.html",transclude:!0,restrict:"E",scope:{},bindToController:{options:"=",model:"=",onChangeCB:"&?onChange"},controllerAs:"selectbox",controller:["$scope","$element","$transclude",function(t,e,n){return this.onChange=function(t){return function(e,n){return t.onChangeCB({params:{option:t.options[t.model],value:t.model}})}}(this),this}],link:function(t,e,n){}}}])},function(t,e,n){"use strict";n(15),n(84),n(108),n(42)},function(t,e,n){"use strict";angular.module("app").directive("share",["$log",n(7),n(2),n(4),function(t,e,n,o){return{templateUrl:"components/share/share.html",restrict:"E",scope:{},bindToController:{eventHandler:"&?"},controllerAs:"share",controller:["$element",function(t){this.showModal=!1,this.onLinkClick=function(t){return function(){var i,s,a,r;null==t.gameLink&&null==t.gameAsStr&&(t.gameAsStr=o.convertGameToStr(e.cacheGameBoard),o.convertStrToGame(t.gameAsStr),r="/",s=window.location.origin+r+"play/",a=n.getGameType(),i=n.getDifficulty(),t.gameOpts="?mode="+a+"&difficulty="+i,t.gameLink=s+t.gameAsStr+t.gameOpts),$(".app-header").css("z-index","4"),t.showModal=!0,"function"==typeof t.eventHandler&&t.eventHandler({params:{type:"show"}})}}(this),this.onModalEvent=function(t){return function(e){return"close"===e&&$(".app-header").css("z-index",""),"function"==typeof t.eventHandler?t.eventHandler({params:{type:e}}):void 0}}(this),this.selectAll=function(e){return function(){var n;n=t.find(".share-modal-input"),n[0].setSelectionRange(0,e.gameLink.length)}}(this)}],link:function(t,e,n){t.$on("modal-animations-done",function(e,n){return"modal-shown"===n.type&&"shareModal"===n.$el.data("name")?t.share.selectAll():void 0})}}}])},function(t,e,n){"use strict";n(85),n(110),n(109),n(44)},function(t,e,n){"use strict";angular.module("app").directive("slideshow",["$log","$timeout","BOARD",n(3),function(t,e,n,o){return{templateUrl:"components/slideshow/slideshow.html",transclude:!0,restrict:"E",scope:{},bindToController:{eventHandler:"&?"},controllerAs:"slideshow",controller:["$scope","$element","$transclude",function(t,n,o){return this.slides=[],this.addSlide=function(t){return function(e){return t.slides.push(e),t.slides}}(this),this.showSlide=function(t){return function(t,e){t.show(e)}}(this),this.hideSlide=function(t){return function(t,e){t.hide(e)}}(this),this.goTo=function(t,n){var o;null!=this.autoSlideTimeout&&e.cancel(this.autoSlideTimeout),this.priorSlide=this.currSlide,this.priorSlideIdx=this.currSlideIdx,"number"==typeof t?(this.currSlideIdx=t,this.directionClass=this.currSlideIdx>this.priorSlideIdx?"left":"right"):"string"==typeof t&&(o="next"===t?1:-1,this.directionClass="next"===t?"left":"right",this.currSlideIdx+=o,"next"===t&&this.currSlideIdx>this.slides.length-1?this.currSlideIdx=0:"prev"===t&&this.currSlideIdx<0&&(this.currSlideIdx=this.slides.length-1)),this.currSlide=this.slides[this.currSlideIdx],null!=this.priorSlide&&this.hideSlide(this.priorSlide,this.directionClass),this.showSlide(this.currSlide,this.directionClass)},this.setTimeout=function(){return this.autoSlideTimeout=e(this.nextSlide,1e4),this.autoSlideTimeout},this}],link:function(t,e,n){t.slideshow.currSlideIdx=-1,t.slideshow.goTo("next","self")}}}]),angular.module("app").directive("slide",["$log","$parse","$timeout",function(t,e,n){return{require:"^slideshow",restrict:"E",templateUrl:"components/slideshow/slide.html",transclude:!0,scope:{},bindToController:{eventHandler:"&?"},controllerAs:"slide",controller:["$scope","$element","$transclude",function(t,e,n){return this.isShown=!1,this.show=function(t){return this.direction=t,this.isShown=!0},this.hide=function(t){return this.direction=t,this.isShown=!1},this}],link:function(t,e,n,o){o.addSlide(t.slide)}}}])},function(t,e,n){"use strict";n(5),n(86),n(111),n(46)},function(t,e,n){"use strict";angular.module("app").directive("scTutorial",["$rootScope","$log","$state","$timeout","TUTORIAL_STEPS","LEVELS","BOARD","SHAPE",n(7),n(8),function(t,e,n,o,i,s,a,r,c,l){return{templateUrl:"components/tutorial/tutorial.html",restrict:"E",scope:{onStepSuccess:"&?",stepNum:"@?step",endNodes:"=?"},link:function(t,e,s){var u,d,h,p,m,f,v,g,y,w,S,x,b;return f=null,u=$(window),b=new l(t),S=i[t.stepNum],t.step=S,h=S.random?S.boardSize:S.shapes.length,p=S.random?S.boardSize:1,d={w:h*r.OUTERSIZE+a.MARGIN.left,h:p*r.OUTERSIZE+a.MARGIN.top},g=function(){return t.canvasCollection={},t.canvasDimensions={goal:{width:d.w,height:r.OUTERSIZE},board:{width:d.w,height:d.h}},t.gameCanvasEvents={start:m.onStart,move:m.onMove,end:m.onEnd,cancel:m.onCancel}},y=function(){f=c.init({scope:{$scope:t,namespace:"game"},settings:{mode:"tutorial",step:t.step},render:{canvas:t.canvasCollection}}),v(),t.endNodes=angular.copy(f.endNodes),f.start(),u.on("resize",m.onResize)},v=function(){var t,n,o,i,s,a,c,l,u;t=e.find(".game"),n=t.find(".game-board"),s=window.innerHeight>650&&S.showGoal?r.OUTERSIZE+10:0,l=window.innerHeight/2,u=window.innerWidth/2,o=d.h/2,i=d.w/2,c=l-s-o,200>c&&(c=180),a=u-i,0>a&&(a=0),t.css({position:"absolute",width:d.w,top:c,left:a}),n.css({height:d.h,width:d.w})},m={onStart:function(e,n){return t.$apply(function(t){return function(){return f.onStartEvent(e,n)}}(this))},onMove:function(e,n){return t.$apply(function(t){return function(){return f.onMoveEvent(e,n)}}(this))},onEnd:function(){return t.$apply(function(t){return function(){return f.onEndEvent()}}(this))},onCancel:function(){return t.$apply(function(t){return function(){return f.onCancelEvent()}}(this))},onResize:function(){return v()}},g(),x=b.start("canvasCollection",function(t){return null!=(null!=t?t.game:void 0)?(x(),y(),w()):void 0}),w=function(){return b.start(function(){return f.won},function(e){return e===!0?o(function(){var e;e=parseInt(t.stepNum)+1,n.go("tutorial",{step:e})},400):void 0})},t.$on("$destroy",function(){return f.destroy()})}}}])},function(t,e,n){"use strict";var o,i,s,a=function(t,e){return function(){return t.apply(e,arguments)}};s={},s.addedNode=n(92),s.removedNode=n(96),s.gameWon=n(97),s.gameLost=n(95),s.badMove=n(93),s.background=n(94),o=["$log","$q",n(2)],i=function(t,e,n){var o;return new(o=function(){function t(){this.pauseSound=a(this.pauseSound,this),this.playSound=a(this.playSound,this),this.downloadSounds=a(this.downloadSounds,this),this.checkAudioState=a(this.checkAudioState,this),this.sounds=s,this.assetsLoaded=0,this.totalSounds=Object.keys(this.sounds).length,this.totalAssests=parseInt(this.totalSounds,10)}return t.prototype.checkAudioState=function(t){var e;return e=this.sounds[t],null!=e?("loading"===e.status&&4===e.readyState&&(e.status="loaded"),e):void 0},t.prototype.downloadAll=function(){return this.downloadSounds()},t.prototype.downloadSounds=function(){var t;return t=e.defer(),this.assetsLoaded>=this.totalAssests?t.resolve():angular.forEach(this.sounds,function(e){return function(n,o){return"string"==typeof n?(e.sounds[o]=new Audio,e.sounds[o].status="loading",e.sounds[o].name=o,e.sounds[o].addEventListener("canplay",function(){return o=e.checkAudioState(o),"loaded"===(null!=o?o.status:void 0)&&(e.assetsLoaded+=1),e.assetsLoaded>=e.totalAssests?t.resolve():void 0}),e.sounds[o].src=n,e.sounds[o].preload="auto",e.sounds[o].load()):(e.assetsLoaded+=1,e.assetsLoaded>=e.totalAssests?t.resolve():void 0)}}(this)),t.promise},t.prototype.playSound=function(t){var e;if(e=this.sounds[t],null!=e)if("background"===t){if(n.getAllowMusic()===!1)return;e.currentTime=0,e.volume=.2,"boolean"==typeof e.loop?e.loop=!0:e.addEventListener("ended",function(){return e.currentTime=0,e.play()},!1),e.play()}else{if(n.getAllowSounds()===!1)return;"badMove"!==t&&(e.currentTime=0),"function"==typeof e.play&&e.play()}},t.prototype.pauseSound=function(t){var e;return e=this.sounds[t],null!=e&&"function"==typeof e.pause?e.pause():void 0},t}())},i.$inject=o,t.exports=i},function(t,e,n){"use strict";n(1),angular.module("app").service("assets",n(47)),t.exports="assets"},function(t,e,n){"use strict";var o,i,s=function(t,e){return function(){return t.apply(e,arguments)}};o=["$log","$interval","SHAPE","HEXCOLORS",n(3)],i=function(t,e,n,o,i){var a;return a=function(){function t(t,e){this.triangle=s(this.triangle,this),this.diamond=s(this.diamond,this),this.square=s(this.square,this),this.circle=s(this.circle,this),this.strokedCircle=s(this.strokedCircle,this),this.solidRedLine=s(this.solidRedLine,this),this.solidLine=s(this.solidLine,this),this.dashedRedLine=s(this.dashedRedLine,this),this.dashedLine=s(this.dashedLine,this),this.text=s(this.text,this),this.genericLine=s(this.genericLine,this),this.genericCircle=s(this.genericCircle,this),this.shakeAnimation=s(this.shakeAnimation,this),this.fadeOutAnimation=s(this.fadeOutAnimation,this),this.shadowAnimation=s(this.shadowAnimation,this),this.fillAnimation=s(this.fillAnimation,this),this.glowLeaveAnimation=s(this.glowLeaveAnimation,this),this.glowEnterAnimation=s(this.glowEnterAnimation,this),this.runAnimation=s(this.runAnimation,this),this.clear=s(this.clear,this),this._defaults={radius:3,size:n.SIZE},this.opts=angular.extend({},this._defaults,e),this.radius=this.opts.radius,this.defaultSize=this.opts.size,this.ctx=t}return t.prototype.clear=function(t,e,n,o){var i;return angular.isObject(t)&&(i=angular.extend({},{},t),t=i.x,e=i.y,n=i.width,o=i.height),this.ctx.clearRect(t,e,n,o)},t.prototype.create=function(t){var e,n;e={type:"square",color:"white",coords:{x:0,y:0},size:{w:this.defaultSize,h:this.defaultSize},style:"untouched"},t=angular.extend({},e,t),t.color.indexOf("#")<0&&(t.color=o[t.color]),null!=t.clear&&this.clear(t.clear),n=this[t.type],"function"==typeof n&&n(t.coords.x,t.coords.y,t.size.w,t.size.h),this.setShapeStyle(t)},t.prototype.createDrawParams=function(t,e,o){var i;if(null!=t)return i=null!=o&&"small"===o?{x:t.position.x,y:t.position.y,width:n.SIZE,height:n.SIZE}:null!=o&&"large"===o?{x:t.position.x-n.MARGIN,y:t.position.y-n.MARGIN,width:n.OUTERSIZE+n.MARGIN,height:n.OUTERSIZE+n.MARGIN}:{x:t.position.x-n.MARGIN/2,y:t.position.y-n.MARGIN/2,width:n.OUTERSIZE,height:n.OUTERSIZE},{type:t.type,color:t.color,style:e,coords:{x:t.position.x,y:t.position.y},clear:i}},t.prototype.runAnimation=function(t,e){var n,i,s,a,r,c;return n={type:"square",color:"white",coords:{x:0,y:0},size:{w:this.defaultSize,h:this.defaultSize},style:"untouched",duration:300},t=angular.extend({},n,t),t.color=o[t.color],a=(new Date).getTime(),s=a+t.duration,c=a+2*t.duration,i=function(n){return function(){var o,a,c,l,u,d;return d=(new Date).getTime(),l=Math.min((t.duration-(s-d))/t.duration,1),c=t.animation.type,a=null,"shadow"===c?a=n.shadowAnimation:"glow"===c?a=n.glowEnterAnimation:"fill"===c?a=n.fillAnimation:"fadeOut"===c?a=n.fadeOutAnimation:"shake"===c&&(a=n.shakeAnimation),u="function"==typeof a?a(t,l,null!=e?e.during:void 0):void 0,1>l?("function"==typeof e.before&&e.before(o,u),o=requestAnimationFrame(i),"function"==typeof e.running&&e.running(o,u),"function"==typeof e.after?e.after(o,u):void 0):"glow"===c?r():"function"==typeof e.done?e.done(u):void 0}}(this),r=function(n){return function(){var o,i,s,a,l;return l=(new Date).getTime(),s=Math.min((t.duration-(c-l))/t.duration,1),i=t.animation.type,"glow"===i&&(a=n.glowLeaveAnimation(t,s,null!=e?e.during:void 0)),1>s?("function"==typeof e.before&&e.before(o,a),o=requestAnimationFrame(r),"function"==typeof e.running&&e.running(o,a),"function"==typeof e.after?e.after(o,a):void 0):"function"==typeof e.done?e.done(a):void 0}}(this),i()},t.prototype.stopAnimation=function(t){return window.cancelAnimationFrame(t),t=void 0},t.prototype.setShapeStyle=function(t){var e;return this.ctx.save(),this.ctx.lineWidth=n.BORDER,e=i.hexToRgb(t.color),"untouched"===t.style?(this.ctx.fillStyle="rgba("+e.r+", "+e.g+", "+e.b+", 1)",this.ctx.strokeStyle=t.color,this.ctx.shadowColor="rgba(0,0,0,0.0)",this.ctx.shadowBlur=0,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0):"start"===t.style?(this.ctx.fillStyle="rgba("+e.r+", "+e.g+", "+e.b+", 1)",this.ctx.strokeStyle="rgba(255,255,255,0.8)"):"touched"===t.style?(this.ctx.fillStyle="rgba(0,0,0,0.0)",this.ctx.strokeStyle=t.color):"disallowed"===t.style?(this.ctx.fillStyle="rgba("+e.r+", "+e.g+", "+e.b+", 0.9)",this.ctx.strokeStyle="black"):"faded"===t.style?(this.ctx.fillStyle="rgba("+e.r+", "+e.g+", "+e.b+", 0.2)",this.ctx.strokeStyle="rgba(0,0,0,0.0)",this.ctx.shadowColor="rgba(0,0,0,0.0)",this.ctx.shadowBlur=0,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0):"glow"===t.style&&(this.ctx.fillStyle="rgba("+e.r+", "+e.g+", "+e.b+", 0.4)",this.ctx.strokeStyle="rgba("+e.r+", "+e.g+", "+e.b+", 1.0)",this.ctx.shadowColor="rgba("+e.r+", "+e.g+", "+e.b+", 0.9)",this.ctx.shadowBlur=30,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0),this.ctx.fill(),this.ctx.stroke(),this.ctx.restore()},t.prototype.glowEnterAnimation=function(t,e,n){var o,s,a,r;return a={width:t.size.w*e*3.2,height:t.size.h*e*3.2},r=(a.width-t.size.w)/2,a.x=t.coords.x-r,a.y=t.coords.y-r,this.clear(a),o=this[t.type],o(a.x,a.y,a.width,a.height),s=i.hexToRgb(t.color),this.ctx.save(),this.ctx.fillStyle="rgba("+s.r+", "+s.g+", "+s.b+", 0.2)",this.ctx.fill(),this.ctx.restore(),t.clear=null,"function"==typeof n&&n(a),this.create(t),a},t.prototype.glowLeaveAnimation=function(t,e){var n,o,s,a,r,c;return r={width:t.size.w*(1-e)*3.2,height:t.size.h*(1-e)*3.2},c=(r.width-t.size.w)/2,r.x=t.coords.x-c,r.y=t.coords.y-c,n={width:1*t.size.w*3.4,height:1*t.size.h*3.4},o=(n.width-t.size.w)/2,n.x=t.coords.x-o,n.y=t.coords.y-o,this.clear(n),s=this[t.type],s(r.x,r.y,r.width,r.height),a=i.hexToRgb(t.color),this.ctx.save(),this.ctx.fillStyle="rgba("+a.r+", "+a.g+", "+a.b+", 0.2)",this.ctx.fill(),this.ctx.restore(),t.clear=null,this.create(t),n},t.prototype.fillAnimation=function(t,e){var n,o,i;return o={width:t.size.w-t.size.w*e,height:t.size.h-t.size.h*e},i=(t.size.w-o.width)/2,o.x=t.coords.x+i,o.y=t.coords.y+i,0===e&&this.clear(t.clear),n=this[t.type],n(o.x,o.y,o.width,o.height),this.ctx.save(),this.ctx.strokeStyle=t.color,this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.restore(),o},t.prototype.shadowAnimation=function(t,e){var n,o;return this.clear(t.clear),n=this[t.type],o=i.hexToRgb(t.color),this.ctx.save(),this.ctx.shadowColor="rgba(0,0,0,0.5)",this.ctx.shadowBlur=t.size.h*e,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=t.size.h*e,this.ctx.fillStyle="rgba("+o.r+", "+o.g+", "+o.b+", 1)",n(t.coords.x,t.coords.y,t.size.w,t.size.h),
this.ctx.fill(),this.ctx.shadowColor="rgba(0,0,0,0)",this.ctx.shadowBlur=0,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.lineWidth=2,this.ctx.strokeStyle="rgba(255,255,255,0.8)",n(t.coords.x,t.coords.y,t.size.w,t.size.h),this.ctx.stroke(),this.ctx.restore(),{x:t.coords.x,y:t.coords.y,width:t.size.w,height:t.size.h}},t.prototype.fadeOutAnimation=function(t,e){var n,o,s;return this.clear(t.clear),s=i.hexToRgb(t.color),n=1-e+.2,o=this[t.type],o(t.coords.x,t.coords.y,t.size.w,t.size.h),this.ctx.save(),this.ctx.fillStyle="rgba("+s.r+", "+s.g+", "+s.b+", "+n+")",this.ctx.strokeStyle="rgba(0,0,0,0.0)",this.ctx.shadowColor="rgba(0,0,0,0.0)",this.ctx.shadowBlur=0,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.fill(),this.ctx.restore(),{x:t.coords.x,y:t.coords.y,width:t.size.w,height:t.size.h}},t.prototype.shakeAnimation=function(t,e,n){var o,s,a,r,c,l,u,d;return this.clear(t.clear),r=this[t.type],c=i.hexToRgb(t.color),o=.5>e?-1:1,l=(60*e-160)*(Math.PI/180),a=t.size.w/2,s=t.size.h/2,d={x:t.coords.x+a,y:t.coords.y+s},u={x:-1*a+15*o*(e/2),y:-1*s,w:t.size.w,h:t.size.h},this.ctx.save(),this.ctx.translate(d.x,d.y),this.ctx.fillStyle="rgba("+c.r+", "+c.g+", "+c.b+", 0.9)",r(u.x,u.y,u.w,u.h),this.ctx.fill(),this.ctx.restore(),u},t.prototype.confettiAnimation=function(t){var n,o,i,s,a,r,c,l,u,d,h;return s={canvas:null,totalParticles:150,radius:10,tilt:3},i=angular.extend({},s,t),null!=i.canvas?(o=i.canvas.width(),n=i.canvas.height(),"auto"===t.totalParticles&&(l=n>o?n:o,i.totalParticles=Math.ceil(n*o/(3*l))),a=0,c=i.totalParticles,u=function(){var t;for(t=[];c-=1;)t.push({x:Math.random()*o,y:Math.random()*n,r:Math.random()*i.radius+1,d:Math.random()*c,color:"rgba("+Math.floor(80*Math.random())+", "+Math.floor(220*Math.random())+", "+Math.floor(200*Math.random())+", 1)",tilt:Math.floor(Math.random()*i.tilt)-i.tilt});return t}(),r=function(t){return function(){t.ctx.clearRect(0,0,o+50,n+50),u.forEach(function(e){return t.ctx.beginPath(),t.ctx.lineWidth=e.r,t.ctx.strokeStyle=e.color,t.ctx.moveTo(e.x,e.y),t.ctx.lineTo(e.x+e.tilt,e.y+e.tilt),t.ctx.stroke()}),h()}}(this),h=function(t){return function(){return a+=.01,u.forEach(function(t,e){return t.y+=Math.cos(a+t.d)+1+t.r/2,t.x+=2*Math.sin(a),t.x>o+5||t.x<-5||t.y>n?e%3>0?u[e]={x:Math.random()*o,y:-10,r:t.r,d:t.d,color:t.color,tilt:t.tilt}:Math.sin(a)>0?u[e]={x:-5,y:Math.random()*n,r:t.r,d:t.d,color:t.color,tilt:t.tilt}:u[e]={x:o+5,y:Math.random()*n,r:t.r,d:t.d,color:t.color,tilt:t.tilt}:void 0})}}(this),d=e(r,20)):void 0},t.prototype.genericCircle=function(t,e,n,o){var i,s,a;this.ctx.beginPath(),a=Math.floor(n/2),i=Math.floor(t+n/2),s=Math.floor(e+o/2),this.ctx.arc(i,s,a,0,2*Math.PI,!1),this.ctx.closePath()},t.prototype.genericLine=function(t,e,n,o){this.ctx.lineCap="round",this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(n,o),this.ctx.stroke()},t.prototype.text=function(t,e){var n,i,s;this.ctx.save(),n=16,this.ctx.font=n+"px PT Sans, sans-serif",this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.fillStyle="#FFFFFF",null!=e.color&&(this.ctx.fillStyle=o[e.color]),null!=e.x&&null!=e.y?this.ctx.fillText(""+t,param.x,e.y):(i=(e.x1+e.x2)/2,s=(e.y2+e.y1)/2,s-=n/1.5,this.ctx.fillText(""+t,i,s)),this.ctx.restore()},t.prototype.dashedLine=function(t,e,n,o){this.ctx.save(),this.ctx.setLineDash([2,5]),this.ctx.lineWidth=2,this.ctx.strokeStyle="white",this.genericLine(t,e,n,o),this.ctx.restore()},t.prototype.dashedRedLine=function(t,e,n,i){this.ctx.save(),this.ctx.setLineDash([2,5]),this.ctx.lineWidth=2,this.ctx.strokeStyle=o.red,this.genericLine(t,e,n,i),this.ctx.restore()},t.prototype.solidLine=function(t,e,n,o){this.ctx.save(),this.ctx.lineWidth=2,this.ctx.strokeStyle="white",this.genericLine(t,e,n,o),this.ctx.restore()},t.prototype.solidRedLine=function(t,e,n,i){this.ctx.save(),this.ctx.lineWidth=2,this.ctx.strokeStyle=o.red,this.genericLine(t,e,n,i),this.ctx.restore()},t.prototype.strokedCircle=function(t,e,i,s,a,r){var c;c=2*(Math.PI*(i/2)),null==r&&(r=2*c),this.ctx.save(),this.genericCircle(t,e,i,s),this.ctx.strokeStyle=o[a],this.ctx.lineWidth=n.BORDER,this.ctx.setLineDash([r,c]),this.ctx.stroke(),this.ctx.restore()},t.prototype.circle=function(t,e,n,o){this.genericCircle(t,e,n,o)},t.prototype.square=function(t,e,n,o){this.ctx.beginPath(),this.ctx.moveTo(t,e+this.radius),this.ctx.lineTo(t,e+o-this.radius),this.ctx.quadraticCurveTo(t,e+o,t+this.radius,e+o),this.ctx.lineTo(t+n-this.radius,e+o),this.ctx.quadraticCurveTo(t+n,e+o,t+n,e+o-this.radius),this.ctx.lineTo(t+n,e+this.radius),this.ctx.quadraticCurveTo(t+n,e,t+n-this.radius,e),this.ctx.lineTo(t+this.radius,e),this.ctx.quadraticCurveTo(t,e,t,e+this.radius),this.ctx.closePath()},t.prototype.diamond=function(t,e,n,o){this.ctx.beginPath(),n+=2,o+=2,this.ctx.moveTo(t+n/2,e),this.ctx.lineTo(t,e+o/2),this.ctx.lineTo(t+n/2,e+o),this.ctx.lineTo(t+n,e+o/2),this.ctx.lineTo(t+n/2,e),this.ctx.closePath()},t.prototype.triangle=function(t,e,n,o){this.ctx.beginPath(),this.ctx.moveTo(t+n/2-this.radius,e+this.radius),this.ctx.lineTo(t,e+o-this.radius),this.ctx.quadraticCurveTo(t,e+o,t+this.radius,e+o),this.ctx.lineTo(t+n-this.radius,e+o),this.ctx.quadraticCurveTo(t+n,e+o,t+n,e+o-this.radius),this.ctx.lineTo(t+n/2+this.radius,e+this.radius),this.ctx.quadraticCurveTo(t+n/2,e-this.radius,t+n/2-this.radius,e+this.radius),this.ctx.closePath()},t}()},i.$inject=o,t.exports=i},function(t,e,n){"use strict";n(1),angular.module("app").service("CanvasDrawService",n(49)),t.exports="CanvasDrawService"},function(t,e,n){"use strict";var o,i;o=["$log","LEVELS","SHAPE","BOARD",n(3)],i=function(t,e,n,o,i){var s;return s=function(){function t(t){this.levels=e,this.shapes={colors:n.COLORS,types:n.TYPES},this.defaults={difficulty:e.DEFAULT.name,dimensions:o.SIZE},this.opts=angular.extend({},this.defaults,t),"tutorial"===this.opts.mode&&this.opts.step.random&&(this.opts.dimensions=this.opts.step.boardSize),this.totalColorChain=0,this.totalShapeChain=0,this.pathSize=this.setPathSize(),this.board=[],this.path=[],this.endNodes=[]}return t.prototype.generateGame=function(){return this.generateGrid(),"tutorial"!==this.opts.mode||this.opts.step.random?(this.generatePath(),"tutorial"===this.opts.mode&&this.opts.step.makeUnique?this.fillGridAsUnique():this.fillGrid()):this.generatePredefinedPath(),this.saveEndNodes(),{endNodes:this.endNodes,maxMoves:this.pathSize,board:this.board}},t.prototype.setPathSize=function(){var t;return"tutorial"===this.opts.mode?this.pathSize=this.opts.step.random?this.opts.step.pathSize:this.opts.step.shapes.length-1:(t=e[this.opts.difficulty.toUpperCase()],this.pathSize=i.getRandomInt(t.min,t.max)),this.pathSize},t.prototype.saveEndNodes=function(){var t,e,n;return n=this.path,t=n[0],e=n[n.length-1],this.endNodes.push(t),this.endNodes.push(e),this.endNodes},t.prototype.generateGrid=function(){var t,e;for(t="tutorial"!==this.opts.mode||this.opts.step.random?this.opts.dimensions:2,this.board=new Array(t),e=0;t>e;)this.board[e]=new Array(t),e+=1;return this.board},t.prototype.generatePredefinedPath=function(){var t,e,n,o;for(o=this.opts.step.shapes.length,t=0;o>t;)n=this.opts.step.shapes[t],e={color:n.color,type:n.type,coords:{x:t,y:0}},this.path.push(e),this.board[e.coords.x][e.coords.y]=e,t+=1},t.prototype.generatePath=function(t){var e,n,o,s,a,r,c,l,u,d,h,p,m,f,v,g,y,w,S,x,b,E,N,A,C,M,$,T,I;if(this.path.length>=this.pathSize)return this.path;if(o=this.shapes.colors,$=this.shapes.types,null==t)return this.visited=[],T=i.getRandomInt(0,this.opts.dimensions-1),I=i.getRandomInt(0,this.opts.dimensions-1),n=i.getRandomInt(0,o.length-1),M=i.getRandomInt(0,o.length-1),f={color:o[n],type:$[M],coords:{x:T,y:I}},this.visited.push(f),this.path.push(f),this.board[f.coords.x][f.coords.y]=f,void this.generatePath(t=f);for(A=[t.coords.x,t.coords.y],g=A[0],y=A[1],E=[[g,y-1],[g,y+1],[g-1,y],[g+1,y]],e=[],b=0;b<E.length;)w=E[b],S=w[0],x=w[1],l=S>=0&&S<this.opts.dimensions,u=x>=0&&x<this.opts.dimensions,d=this.checkVisited(S,x),u&&l&&!d&&e.push(w),b+=1;return 0===e.length?(C=this.path.pop(),C.isKeepColor?this.totalColorChain-=1:this.totalShapeChain-=1,this.board[C.coords.x][C.coords.y]=void 0,void this.generatePath(this.path[this.path.length-1])):(N=i.getRandomInt(0,e.length-1),p=e[N],m=angular.copy(t),m.coords={x:p[0],y:p[1]},c=i.coinFlip(),a=this.checkHasColorChain(),r=this.checkHasShapeChain(),a?(c=!1,this.totalColorChain=0):r&&(c=!0,this.totalShapeChain=0),this.updateChainTally(c),m.isKeepColor=c,h={name:c?"type":"color"},h.opts=[].concat(this.shapes[h.name+"s"]),v=h.opts.indexOf(t[h.name]),h.opts.splice(v,1),this.path.length+1>=this.pathSize&&(s=h.opts.indexOf(this.path[0][h.name]),h.opts.splice(s,1)),h.index=i.getRandomInt(0,h.opts.length-1),m[h.name]=h.opts[h.index],this.visited.push(m),this.path.push(m),this.board[m.coords.x][m.coords.y]=m,void this.generatePath(m))},t.prototype.checkVisited=function(t,e){var n;return n=!1,$.each(this.visited,function(o,i){i.coords.x===t&&i.coords.y===e&&(n=!0)}),n},t.prototype.updateChainTally=function(t){return t?this.totalColorChain+=1:this.totalShapeChain+=1},t.prototype.checkHasColorChain=function(){return this.totalColorChain>2},t.prototype.checkHasShapeChain=function(){return this.totalShapeChain>2},t.prototype.fillGrid=function(){return $.each(this.board,function(t){return function(e,n){return $.each(n,function(n,o){var s,a;return null==o?(s=i.getRandomInt(0,t.shapes.colors.length-1),a=i.getRandomInt(0,t.shapes.types.length-1),o={color:t.shapes.colors[s],type:t.shapes.types[a],coords:{x:e,y:n}},t.board[e][n]=o):void 0})}}(this)),this.board},t.prototype.fillGridAsUnique=function(){var t,e,n;return n=[],t=[],e=function(t){return function(n){var o,s,a,r,c;return s=i.getRandomInt(0,t.shapes.colors.length-1),c=i.getRandomInt(0,t.shapes.types.length-1),r=t.shapes.types[c],o=t.shapes.colors[s],a=r+":"+o,-1===n.indexOf(a)?[o,r]:e(n)}}(this),$.each(this.board,function(e){return function(e,o){return $.each(o,function(o,i){var s;return null!=i?(s=i.type+":"+i.color,n.push(s)):t.push({coords:{x:e,y:o}})})}}(this)),$.each(t,function(t){return function(o,i){var s,a,r,c,l,u;return r=e(n),s=r[0],c=r[1],i.color=s,i.type=c,l=i.coords.x,u=i.coords.y,t.board[l][u]=i,a=i.type+":"+i.color,n.push(a)}}(this)),this.board},t.prototype.findNodeByAttrs=function(t,e){var n;return n={found:!1,node:null},$.each(t,function(t){return function(t){return t.color===e.color&&t.type===e.type?(n.found=!0,n.node=t,n):void 0}}(this)),n},t}()},i.$inject=o,t.exports=i},function(t,e,n){"use strict";n(1),angular.module("app").service("GameBuilderService",n(51)),t.exports="GameBuilderService"},function(t,e,n){"use strict";var o,i,s=function(t,e){return function(){return t.apply(e,arguments)}};o=["$rootScope","$log","BOARD","SHAPE",n(4)],i=function(t,e,n,o,i){var a;return a=function(){function e(t,e){this.game=t,this.canvas=e,this.movesLeft=s(this.movesLeft,this)}return e.prototype.run=function(){return this.clearLinesBoard(),this.clearGoalBoard(),this.clearGameBoard(),this.board(),"tutorial"===this.game.mode&&this.game.step.showGoal&&!this.game.step.showMovesLeft?this.goalWithoutMoves():this.goal()},e.prototype.getNodeStyle=function(t,e){var n,o,s;if(null!=t)return e=this.game.getSelectedNodes.last(),t.selected===!0?s=i.isSameNode(t,this.game.startNode)?"start":this.game.won&&i.isSameNode(t,e)?"start":"touched":(o=i.isValidNextMove(e,t),n="tutorial"!==this.mode||this.step.random?this.game.movesLeft>0:this.game.movesLeft>=0,s=o===!0&&n?"glow":"untouched"),s},e.prototype.movesLeft=function(t,e){var s,a,r,c,l;return null==e&&(e="white"),"tutorial"!==this.game.mode||!this.game.step.showGoal||this.game.step.showMovesLeft?(l=t?this.game.maxMoves-1:this.game.movesLeft,t?e="teal":parseInt(l,10)<=0&&(e="red"),s=n.SIZE,"tutorial"===this.game.mode&&(s=this.game.step.random?this.game.step.boardSize:this.game.step.shapes.length),r=Math.floor(s/2),a=i.calcCanvasX(r),c={y:o.BORDER,w:2*o.SIZE},c.h=c.w,c.x=a-c.w/4,this.canvas.goal.draw.clear(c.x-o.BORDER,c.y-o.BORDER,c.w+2*o.BORDER,c.h+3*o.BORDER),this.canvas.goal.draw.strokedCircle(c.x,c.y,c.w,c.h,e),this.canvas.goal.draw.text(l+"",{x1:c.x,y1:c.y,x2:c.x+c.w,y2:c.y+c.h,color:e}),c):void 0},e.prototype.goal=function(t,e){var s,a,r;if("tutorial"!==this.game.mode||!this.game.step.showGoal||this.game.step.showMovesLeft)return null==t&&(t=this.game.endNodes),null==e&&(e=this.game.won),this.canvas.goal.draw.clear(0,0,n.DIMENSIONS.w,n.MARGIN),r=this.movesLeft(e),s=n.SIZE,"tutorial"===this.game.mode&&(s=this.game.step.random?this.game.step.boardSize:this.game.step.shapes.length),a=Math.floor(s/2),$.each(t,function(t){return function(n,s){var c,l,u,d,h;c=0===n?-1:1,d=i.calcCanvasX(a+c),h=(r.y+r.h-o.SIZE/2)/2,l={y1:h+o.SIZE/2,y2:h+o.SIZE/2,x1:d,x2:r.x},-1===c?(l.x1+=o.SIZE,l.x2-=o.BORDER):l.x2+=r.w,e?(1===c&&(l.x2+=o.BORDER),u="start",t.canvas.goal.draw.solidLine(l.x1,l.y1,l.x2,l.y2)):(1===c&&(l.x2+=o.BORDER/2),u="untouched",t.canvas.goal.draw.dashedLine(l.x1,l.y1,l.x2,l.y2)),t.canvas.goal.draw.create({type:s.type,color:s.color,coords:{x:d,y:h},style:u})}}(this))},e.prototype.goalWithoutMoves=function(){var t,e,s,a,r,c,l,u,d,h;return e=this.game.endNodes,s=this.game.won,t="tutorial"===this.game.mode?this.game.step.random?this.game.step.boardSize:this.game.step.shapes.length:n.SIZE,r=t/2,l=i.calcCanvasX(0)+o.SIZE/2,u=i.calcCanvasX(1)+o.SIZE/2,d=h=o.SIZE+o.SIZE/2,a={x1:l,y1:d,x2:u,y2:h},s?(c="start",this.canvas.goal.draw.solidLine(a.x1,a.y1,a.x2,a.y2)):(c="untouched",this.canvas.goal.draw.dashedLine(a.x1,a.y1,a.x2,a.y2)),$.each(e,function(t){return function(e,n){var s,a;return s=0===e?i.calcCanvasX(0):i.calcCanvasX(1),a=o.SIZE,t.canvas.goal.draw.create({type:n.type,color:n.color,coords:{x:s,y:a},style:c})}}(this))},e.prototype.board=function(t,e){var n;n=this.game.board,null==t&&(t=this.game.won),$.each(n,function(n){return function(o,s){return $.each(s,function(o,s){var a,r,c;null!=s&&(t?s.selected?(null!=e?e.animation:void 0)===!0&&(n.stopAnimation(s,"glow"),n.shadowAnimation(s)):(null!=e?e.animation:void 0)===!0?(n.stopAnimation(s,"glow"),n.fadeOutAnimation(s)):(a=n.canvas.game.draw.createDrawParams(s,"faded"),n.canvas.game.draw.create(a)):(r=i.calcCanvasX(s.coords.x),c=i.calcCanvasY(s.coords.y),s.position={x:r,y:c},s.selected=!1,n.canvas.game.draw.create({type:s.type,color:s.color,coords:{x:r,y:c}})))})}}(this))},e.prototype.allDashedLines=function(){return $.each(this.game.selectedNodes,function(t){return function(e,n){var o;return e>0?(o=t.game.selectedNodes[e-1],t.connectingLine(n,o)):void 0}}(this))},e.prototype.allSolidLines=function(){return $.each(this.game.selectedNodes,function(t){return function(e,n){var o;return e>0?(o=t.game.selectedNodes[e-1],t.connectingLine(n,o,"solid")):void 0}}(this))},e.prototype.connectingLine=function(t,e,n){var s,a,r,c,l,u,d,h;return null==n&&(n="dashed"),t.selected?(angular.isString(e)&&(n=e+"",e=null),null==e&&$.each(this.game.selectedNodes,function(n,o){i.isSameNode(t,o)&&(e=this.game.selectedNodes[n-1])}),null==e?!1:(s={x:t.position.x-o.MARGIN/2,y:t.position.y-o.MARGIN/2,width:o.OUTERSIZE,height:o.OUTERSIZE},this.canvas.lines.draw.clear(s),c=2,l=t.position.x+o.SIZE/2,d=t.position.y+o.SIZE/2+c/2,u=e.position.x+o.SIZE/2,h=e.position.y+o.SIZE/2+c/2,this.game.movesLeft<0?"solid"===n?this.canvas.lines.draw.solidRedLine(l,d,u,h):this.canvas.lines.draw.dashedRedLine(l,d,u,h):"solid"===n?this.canvas.lines.draw.solidLine(l,d,u,h):this.canvas.lines.draw.dashedLine(l,d,u,h),this.game.won||(a=this.canvas.lines.draw.createDrawParams(t,"invisible","small").clear,r=this.canvas.lines.draw.createDrawParams(e,"invisible","small").clear,this.canvas.lines.draw.clear(a),this.canvas.lines.draw.clear(r)),!0)):!1},e.prototype.removeConnectingLine=function(t){var e,n,i;n=t.position.x-o.MARGIN,i=t.position.y-o.MARGIN,e=o.OUTERSIZE+o.MARGIN,this.canvas.lines.draw.clear(n,i,e,e)},e.prototype.clearLinesBoard=function(){var t;return t={x:0,y:0,width:this.canvas.lines.el.width,height:this.canvas.lines.el.width},this.canvas.lines.draw.clear(t)},e.prototype.clearGoalBoard=function(){var t;return t={x:0,y:0,width:this.canvas.goal.el.width,height:this.canvas.goal.el.width},this.canvas.goal.draw.clear(t)},e.prototype.clearGameBoard=function(){var t;return t={x:0,y:0,width:this.canvas.game.el.width,height:this.canvas.game.el.width},this.canvas.game.draw.clear(t)},e.prototype.trackingLine=function(t,e){var n,i;return this.clearLinesBoard(),this.allDashedLines(),null!=t?(i={x:t.position.x+o.SIZE/2,y:t.position.y+o.SIZE/2},this.canvas.lines.draw.dashedLine(i.x,i.y,e.x,e.y),n=this.canvas.lines.draw.createDrawParams(t,"invisible","small").clear,this.canvas.lines.draw.clear(n)):void 0},e.prototype.clearBoardMargins=function(){var t,e,i;return e={x:0,y:0,width:o.MARGIN/4,height:n.DIMENSIONS.h},i={x:n.DIMENSIONS.w-o.MARGIN/2,y:0,width:o.MARGIN,height:n.DIMENSIONS.h},t={x:0,y:n.DIMENSIONS.h-o.MARGIN/2,width:n.DIMENSIONS.w,height:o.MARGIN},this.canvas.game.draw.clear(e),this.canvas.game.draw.clear(i),this.canvas.game.draw.clear(t)},e.prototype.timer=function(t){var e,n,o,i,s;return null==t&&(t="white"),i=this.game.timeRemaining,s=this.game.totalTime,i.total<=10&&(t="red"),o=100-i.total/s*100,n={x:0,y:0,width:this.canvas.timer.el.width,height:this.canvas.timer.el.height},e={x:5,y:5,width:32,height:32},this.canvas.timer.draw.clear(n),this.canvas.timer.draw.strokedCircle(e.x,e.y,e.width,e.height,t,o),this.canvas.timer.draw.text(i.total+"",{x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height,color:t}),e},e.prototype.stopAnimation=function(t,e){if(null!=t&&null!=t.animation){if(null!=e){if(t.animation.type!==e)return;return this.canvas.game.draw.stopAnimation(t.animation.id),void this.canvas.game.draw.clear(t.animation.clear)}this.canvas.game.draw.stopAnimation(t.animation.id),this.canvas.game.draw.clear(t.animation.clear)}},e.prototype.glowAnimation=function(t){var e,n;n=this.getNodeStyle(t),e=this.canvas.game.draw.createDrawParams(t,n),e.animation={type:"glow"},this.canvas.game.draw.runAnimation(e,{running:function(e){return function(n,o){return e.clearBoardMargins(),t.animation={type:"glow",id:n,clear:o}}}(this),done:function(n){return function(o){var s;return t.animation=null,s=i.getNeighborNodes(n.game.board,t),n.game.addTouchedNodes(s),n.clearBoardMargins(),n.canvas.game.draw.create(e)}}(this)})},e.prototype.fillAnimation=function(t){var e,n;n=this.getNodeStyle(t),e=this.canvas.game.draw.createDrawParams(t,n),e.animation={type:"fill"},this.canvas.game.draw.runAnimation(e,{running:function(e){return function(e,n){return t.animation={type:"fill",id:e,clear:n}}}(this),done:function(o){return function(i){return n=o.getNodeStyle(t),e=o.canvas.game.draw.createDrawParams(t,n),t.animation=null,o.canvas.game.draw.clear(i),o.canvas.game.draw.create(e)}}(this)})},e.prototype.shadowAnimation=function(e){var n;n=this.canvas.game.draw.createDrawParams(e,"untouched"),n.animation={type:"shadow"},n.duration=200,this.canvas.game.draw.runAnimation(n,{running:function(t){return function(t,n){return e.animation={type:"shadow",id:t,clear:n}}}(this),done:function(n){return function(o){return t.$apply(function(){return e.animation=null,n.clearBoardMargins(),n.game.endGameAnimation+=1})}}(this)})},e.prototype.fadeOutAnimation=function(e){var n;n=this.canvas.game.draw.createDrawParams(e,"untouched"),n.animation={type:"fadeOut"},n.duration=700,this.canvas.game.draw.runAnimation(n,{running:function(t){return function(t,n){return e.animation={type:"fadeOut",id:t,clear:n}}}(this),done:function(o){return function(i){return t.$apply(function(){var t;return e.animation=null,o.clearBoardMargins(),o.game.gameOver?o.game.endGameAnimation+=1:(t=o.getNodeStyle(e),n=o.canvas.game.draw.createDrawParams(e,t),o.canvas.game.draw.clear(i),o.canvas.game.draw.create(n))})}}(this)})},e.prototype.shakeAnimation=function(e){var n;null!=e&&(n=this.canvas.game.draw.createDrawParams(e,"untouched"),n.animation={type:"shake"},n.duration=300,this.canvas.game.draw.runAnimation(n,{running:function(t){return function(t,n){return e.animation={type:"shake",id:t,clear:n}}}(this),done:function(o){return function(i){return t.$apply(function(){var t;return e.animation=null,t=o.getNodeStyle(e),n=o.canvas.game.draw.createDrawParams(e,t),o.canvas.game.draw.clear(i),o.canvas.game.draw.create(n)})}}(this)}))},e}()},i.$inject=o,t.exports=i},function(t,e,n){"use strict";n(1),angular.module("app").service("GameDrawerService",n(53)),t.exports="GameDrawerService"},function(t,e,n){"use strict";var o,i,s=function(t,e){return function(){return t.apply(e,arguments)}};o=["$log","$timeout","LEVELS","BOARD","SHAPE",n(3),n(58),n(52),n(54),n(8),n(4),"assets"],i=function(t,e,n,o,i,a,r,c,l,u,d,h){var p;return new(p=function(){function t(){this.onCancelEvent=s(this.onCancelEvent,this),this.onEndEvent=s(this.onEndEvent,this),this.onMoveEvent=s(this.onMoveEvent,this),this.onStartEvent=s(this.onStartEvent,this),this.onRemovedNodesChange=s(this.onRemovedNodesChange,this),this.onAddedNodesChange=s(this.onAddedNodesChange,this),this.onTouchedNodesChange=s(this.onTouchedNodesChange,this),this.onSelectedNodesChange=s(this.onSelectedNodesChange,this),this.onEndGameAnimationChange=s(this.onEndGameAnimationChange,this),this.onMovesLeftChange=s(this.onMovesLeftChange,this),this.onGameLost=s(this.onGameLost,this),this.onGameWon=s(this.onGameWon,this),this.onTimerChange=s(this.onTimerChange,this),this.checkIsTouched=s(this.checkIsTouched,this)}return t.prototype.init=function(t){var e;return this.scope=t.scope.$scope,this.namespace=t.scope.namespace,this.mode=t.settings.mode,this.canvas=t.render.canvas,"tutorial"===this.mode?this.step=t.settings.step:(this.difficulty=t.settings.difficulty,e=t.render.board,null==this.difficulty&&(this.difficulty=n.DEFAULT.name)),this.selectedNodes=[],this.addedNodes=[],this.removedNodes=[],this.touchedNodes=[],this.lastSelectedState=[],this.startNode=null,this.gameOver=!1,this.animationsDone=!1,this.disableNewConnections=null,this.dragStart={},this.isDragging=!1,this.isValidStart=!1,this.hasTimer="timed"===this.mode,this.hasTimer&&(this.timer=null,this.totalTime=n[this.difficulty.toUpperCase()].timer,this.timeRemaining=0),this.selectedNodesHelper(),this.setBoard(e),this.scope[this.namespace]=this,this},t.prototype.destroy=function(){var t;this.watcher.stopAll(),null!=(t=this.timer)&&t.stop()},t.prototype.selectedNodesHelper=function(){return this.getSelectedNodes={first:function(t){return function(){return t.selectedNodes[0]}}(this),last:function(t){return function(){return t.selectedNodes[t.selectedNodes.length-1]}}(this),total:function(t){return function(){return t.selectedNodes.length}}(this)}},t.prototype.setBoard=function(t){var e,n;n=new c({mode:this.mode,step:this.step,difficulty:this.difficulty}),e=null!=t?angular.copy(t):n.generateGame(),this.cacheGameBoard=angular.copy(e),this.board=e.board,this.endNodes=e.endNodes,this.maxMoves=e.maxMoves,this.movesLeft=this.maxMoves-1},t.prototype.start=function(){return this.render=new l(this,this.canvas),this.won=!1,this.lost=!1,this.watch(),h.downloadAll().then(function(t){return function(){return t.render.run(),t.hasTimer?(t.timer=new r(t.totalTime),t.timer.onTick=t.onTimerChange,t.timer.start()):void 0}}(this)),this},t.prototype.watch=function(){return this.watcher=new u(this.scope),this.watcher.start(this.namespace+".won",this.onGameWon),this.watcher.start(this.namespace+".lost",this.onGameLost),this.watcher.start(this.namespace+".movesLeft",this.onMovesLeftChange),this.watcher.start(this.namespace+".selectedNodes",this.onSelectedNodesChange),this.watcher.start(this.namespace+".touchedNodes",this.onTouchedNodesChange),this.watcher.start(this.namespace+".addedNodes",this.onAddedNodesChange),this.watcher.start(this.namespace+".removedNodes",this.onRemovedNodesChange),this.watcher.start(this.namespace+".endGameAnimation",this.onEndGameAnimationChange)},t.prototype.pauseGame=function(){var t;this.hasTimer&&null!=(t=this.timer)&&t.pause()},t.prototype.resumeGame=function(){var t;this.hasTimer&&(this.gameOver||null!=(t=this.timer)&&t.start())},t.prototype.isGrandPaNode=function(t){var e;return e=this.selectedNodes[this.selectedNodes.length-2],d.isSameNode(t,e)},t.prototype.checkIsTouched=function(t){var e;return e=!1,$.each(this.touchedNodes,function(n,o){d.isSameNode(t,o)&&(e=!0)}),e},t.prototype.validateTouchAxis=function(t){var e,n,o,i,s;return e="calcCanvas"+t.type.toUpperCase(),n=d[e](t.nodeCoord),i=d.calcShapeMinTrigger(n),o=d.calcShapeMaxTrigger(n),i<=(s=t.touchPos)&&o>=s},t.prototype.checkMove=function(t,e,n){var o,i,s,a,r,c;return null==n&&(n={save:!0}),c={ok:!1},c.reason="no-node",null==t||t===!1?c:0===this.getSelectedNodes.total()?(a=!1,$.each(this.endNodes,function(e){return function(e,n){var o,i;return o=t.color===n.color,i=t.type===n.type,o&&i?a=!0:void 0}}(this)),n.save&&a&&this.saveNode(t),c.ok=a,c.reason="invalid-start",c):t.selected===!0?(n.save===!0&&this.saveNode(t),c.ok=!0,c.reason="selected-node",c):(o=this.validateTouchAxis({type:"x",nodeCoord:t.coords.x,touchPos:e.x}),i=this.validateTouchAxis({type:"y",nodeCoord:t.coords.y,touchPos:e.y}),c.ok=!1,c.reason="invalid-distance",o&&i?(r=this.getSelectedNodes.last(),s=d.isValidNextMove(r,t),c.ok=!1,c.reason="invalid-move",s?(n.save===!0&&this.saveNode(t),c.ok=!0,c.reason=null,c):c):c)},t.prototype.isGameOver=function(){var t,e,n,o,i,s,a,r,c,l;return this.movesLeft>0?!1:(c=this.selectedNodes,n=c[0],r=c[c.length-1],l=this.endNodes,t=l[0],e=l[l.length-1],o=d.isSameShape(n,t),a=d.isSameShape(r,e),i=d.isSameShape(n,e),s=d.isSameShape(r,t),o&&a||i&&s?!0:!1)},t.prototype.saveNode=function(t){var e,n,o,i;return null==t?!1:this.disableNewConnections&&t.selected!==!0?!1:t.selected===!0?1===this.selectedNodes.length?(this.board[t.coords.x][t.coords.y].selected=!1,this.removedNodes.push(t),this.selectedNodes.pop(),!0):(n=this.selectedNodes.findIndex(function(e,n){return d.isSameNode(t,e)}),n+=0===n?0:1,i=angular.copy(this.selectedNodes),o=i.splice(n,this.selectedNodes.length),$.each(o,function(t){return function(e,n){n.selected=!1,t.board[n.coords.x][n.coords.y].selected=!1}}(this)),this.removedNodes=this.removedNodes.concat(o),this.selectedNodes.splice(n,this.selectedNodes.length),!0):(e=t.coords,this.board[e.x][e.y].selected=!0,this.selectedNodes.push(t),this.addedNodes.push(t),!0)},t.prototype.addTouchedNodes=function(t){var e,n;return e=[],Array.isArray(t)||(n=t,t=[].push(n)),$.each(t,function(t){return function(n,o){var i;return i=t.checkIsTouched(o),i?void 0:e.push(o)}}(this)),this.touchedNodes=this.touchedNodes.concat(e)},t.prototype.onTimerChange=function(t){return this.timeRemaining=t,this.render.timer(),this.timeRemaining.total<=0?this.lost=!0:void 0},t.prototype.onGameWon=function(t){var e;return t===!0?(this.gameOver=!0,this.endGameAnimation=0,this.movesLeft=0,"timed"===this.mode&&("function"==typeof(e=this.timer).stop&&e.stop(),this.solveTime=this.totalTime-this.timeRemaining.total),this.render.clearLinesBoard(),this.render.allSolidLines(this.selectedNodes),this.render.goal(this.endNodes,t),this.render.movesLeft(this.won),h.pauseSound("removedNode"),h.pauseSound("addedNode"),h.playSound("gameWon"),this.render.board(t,{animation:!0})):void 0},t.prototype.onGameLost=function(t){return t===!0?(this.gameOver=!0,this.animationsDone=!0,h.playSound("gameLost")):void 0},t.prototype.onMovesLeftChange=function(t){return 0>t&&!this.won&&!this.lost?(this.disableNewConnections=!0,this.render.movesLeft(this.won,"red")):void 0},t.prototype.onEndGameAnimationChange=function(t){var e;return e=o.SIZE*o.SIZE,t===e?(this.render.board(this.won,{animation:!1}),this.animationsDone=!0):void 0},t.prototype.onSelectedNodesChange=function(t){var e;null==t&&(t=[]),e=t.length,this.startNode=t[0],this.dragStart=t[t.length-1],"tutorial"!==this.mode||this.step.random?(0===e?this.movesLeft=this.maxMoves-1:this.movesLeft=this.maxMoves-e,this.render.movesLeft(this.won),this.movesLeft<=0?(this.won=this.isGameOver(),this.disableNewConnections=!0):this.disableNewConnections=!1):(this.movesLeft=this.maxMoves-e,this.movesLeft<0?(this.won=this.isGameOver(),this.disableNewConnections=!0):this.disableNewConnections=!1),this.getAllNeighborNodes(),this.lastSelectedState=angular.copy(this.selectedNodes)},t.prototype.getAllNeighborNodes=function(){var t,e,n,o;o=[],n=this.lastSelectedState[this.lastSelectedState.length-1],e=this.getSelectedNodes.last(),null!=n&&(t=d.getNeighborNodes(this.board,n),o=o.concat(t),o=o.concat(n)),null!=e&&(o=o.concat(d.getNeighborNodes(this.board,e)),o=o.concat(e)),this.addTouchedNodes(o)},t.prototype.onTouchedNodesChange=function(t){return null==t&&(t=[]),$.each(t,function(t){return function(e,n){var o,i;return o=t.render.getNodeStyle(n),i=t.canvas.game.draw.createDrawParams(n,o),t.canvas.game.draw.create(i)}}(this)),this.touchedNodes=[]},t.prototype.onAddedNodesChange=function(t){return null==t&&(t=[]),this.won=this.isGameOver(),!this.won&&t.length>0&&$.each(t,function(t){return function(e,n){return h.playSound("addedNode"),t.render.glowAnimation(n)}}(this)),this.addedNodes=[]},t.prototype.onRemovedNodesChange=function(t){return null==t&&(t=[]),t.length>0&&$.each(t,function(t){return function(e,n){return t.render.stopAnimation(n,"glow"),t.render.removeConnectingLine(n),h.playSound("removedNode"),t.render.fillAnimation(n)}}(this)),this.removedNodes=[]},t.prototype.onStartEvent=function(t,n){var o,i,s,a,r,c,l,u;o={type:"touch"},n=angular.extend({},o,n),this.gameOver!==!0&&("touch"===n.type?(t.preventDefault(),l=t.changedTouches[0]):l=t,s=this.canvas.game.$el.offset(),c={x:l.pageX-s.left,y:l.pageY-s.top},a=d.findNode(this.board,c),null!=a&&(i=!0,r=this.checkMove(a,c,{save:!1}),r.ok&&(1===this.selectedNodes.length?(i=!1,this.isWaitingForMovement=!0,this.isValidStart=!0,e(function(t){return function(){return t.isWaitingForMovement=!1,t.isDragging?void 0:(t.saveNode(a),t.justSavedNode=a,t.render.allDashedLines())}}(this),300)):(u=this.saveNode(a),u===!0&&(i=!1),this.justSavedNode=a,this.isValidStart=!0,this.onMoveEvent(t,{start:!0,alreadyTouched:!0}))),i===!0&&"invalid-distance"!==r.reason&&(h.playSound("badMove"),this.render.shakeAnimation(a))))},t.prototype.onMoveEvent=function(t,e){var n,o,i,s,a,r,c,l,u,p,m,f;n={start:!1,type:"touch",alreadyTouched:!1,justSavedNode:this.justSavedNode},e=angular.extend({},n,e),this.gameOver!==!0&&(m=t,"touch"===e.type&&(t.preventDefault(),e.alreadyTouched||(m=t.changedTouches[0])),i=this.canvas.game.$el.offset(),p={x:m.pageX-i.left,y:m.pageY-i.top},s=d.findNode(this.board,p),s&&e.start?(this.isDragging=!0,0===this.getSelectedNodes.total()?(this.isValidStart=!1,$.each(this.endNodes,function(t){return function(e,n){var o,i;return o=s.color===n.color,i=s.type===n.type,o&&i?t.isValidStart=!0:void 0}}(this))):(u=this.getSelectedNodes.last(),this.isValidStart=d.isSameNode(s,u))):this.isWaitingForMovement===!0&&(this.isDragging=!0),r="mouse"===e.type&&this.isDragging,l="touch"===e.type,a=null!=e.justSavedNode?!d.isSameNode(s,e.justSavedNode):!0,(l||r)&&(o=!0,this.isValidStart&&(c=this.checkMove(s,p,{save:!1}),e.start&&(this.dragStart=s),this.render.trackingLine(this.dragStart,p),o=!c.ok,c.ok&&a&&(f=this.saveNode(s),this.justSavedNode=s,o=!f)),o===!0&&"invalid-distance"!==(null!=c?c.reason:void 0)&&(h.playSound("badMove"),this.render.shakeAnimation(s))))},t.prototype.onEndEvent=function(){return this.isDragging=!1,this.gameOver?void 0:(this.render.clearLinesBoard(),this.render.allDashedLines())},t.prototype.onCancelEvent=function(){return this.gameOver?void 0:(this.removedNodes=[],this.removedNodes=[].concat(this.selectedNodes),this.selectedNodes=[])},t}())},i.$inject=o,t.exports=i},function(t,e){"use strict";var n,o;n=["$log","$localStorage","GAME_TYPES","LEVELS"],o=function(t,e,n,o){var i;return new(i=function(){function t(){e.$default({allowSounds:!0,allowMusic:!0,difficulty:o.DEFAULT.name}),this.gameType=n["default"],this.allowSounds=e.allowSounds,this.allowMusic=e.allowMusic,this.difficulty=e.difficulty}return t.prototype.setGameType=function(t){return n.options.indexOf(t)>=0&&(this.gameType=t),this.gameType},t.prototype.setDifficulty=function(t){
return null!=o[null!=t?t.toUpperCase():void 0]&&(this.difficulty=t.toLowerCase()),e.difficulty=this.difficulty,this.difficulty},t.prototype.setAllowSounds=function(t){return this.allowSounds=t,e.allowSounds=this.allowSounds,this.allowSounds},t.prototype.setAllowMusic=function(t){return this.allowMusic=t,e.allowMusic=this.allowMusic,this.allowMusic},t.prototype.toggle=function(t){return"sounds"===t?this.toggleAllowSounds():"music"===t?this.toggleAllowMusic():void 0},t.prototype.toggleAllowSounds=function(){return this.setAllowSounds(!this.allowSounds)},t.prototype.toggleAllowMusic=function(){return this.setAllowMusic(!this.allowMusic)},t.prototype.getGameType=function(){return this.gameType},t.prototype.getDifficulty=function(){return this.difficulty},t.prototype.getAllowSounds=function(){return this.allowSounds},t.prototype.getAllowMusic=function(){return this.allowMusic},t}())},o.$inject=n,t.exports=o},function(t,e){"use strict";var n,o;n=["$log","BOARD","SHAPE","ALPHABET"],o=function(t,e,n,o){var i;return i={convertGameToStr:function(t){var e,n,o;return o=t.endNodes.reduce(function(t,e,n,o){var s,a;return a=i.convertNodeToStr(t,!0),s=i.convertNodeToStr(e,!0),a+":"+s}),e=[],t.board.forEach(function(t,n){return t.forEach(function(t){return e.push(i.convertNodeToStr(t))})}),n=o+":"+t.maxMoves+":"+e.join(""),window.btoa(n)},convertStrToGame:function(t){var e,n,o,s,a,r,c,l,u;return a=window.atob(t),s={maxMoves:0,endNodes:[],board:[]},l=a.split(":"),u=l[0],n=l[1],c=l[2],e=l[3],s.maxMoves=parseInt(c,10),s.endNodes.push(i.convertStrToNode(u)),s.endNodes.push(i.convertStrToNode(n)),o=e.split(""),r=Math.sqrt(o.length),o.forEach(function(t,e){var n,o;return n=Math.floor(e/r),o=e%r,null==s.board[n]&&(s.board[n]=[]),s.board[n][o]=i.convertStrToNode(t),s.board[n][o].coords={x:n,y:o}}),s},convertNodeToStr:function(t,e){var i,s,a,r,c;return null==e&&(e=!1),s=n.COLORS.indexOf(t.color),c=n.TYPES.indexOf(t.type),i=s*n.COLORS.length+c,r=o[i],e&&(a=t.coords.x+""+t.coords.y,r+=a),r},convertStrToNode:function(t){var e,i,s,a,r,c,l,u,d;return i={color:"",type:"",coords:{}},u=t.split(""),s=u[0],c=u[1],l=u[2],e=o.indexOf(s),d=n.COLORS.length,a=Math.floor(e/d),r=e%d,i.color=n.COLORS[a],i.type=n.TYPES[r],null!=c&&null!=l&&(i.coords={x:parseInt(c,10),y:parseInt(l,10)}),i},calcBoardX:function(t){return Math.round((t-e.MARGIN.left)/n.OUTERSIZE)},calcBoardY:function(t){return Math.round((t-e.MARGIN.top)/n.OUTERSIZE)},calcCanvasX:function(t){return t*n.OUTERSIZE+e.MARGIN.left},calcCanvasY:function(t){return t*n.OUTERSIZE+e.MARGIN.top},calcShapeMinTrigger:function(t){return t-n.MARGIN/2},calcShapeMaxTrigger:function(t){return t+n.SIZE+n.MARGIN/2},isValidBoardAxis:function(t){return t>=0&&t<e.SIZE},isSameNode:function(t,e){var n,o;return null==t||null==e?!1:(n=t.coords.x===e.coords.x,o=t.coords.y===e.coords.y,n&&o)},isSameShape:function(t,e){var n,o;return null==t||null==e?!1:(n=t.color===e.color,o=t.type===e.type,n&&o)},findNode:function(t,e){var n,o,i,s,a;return n=this.calcBoardX(e.x),o=this.calcBoardY(e.y),i=this.isValidBoardAxis(n),s=this.isValidBoardAxis(o),i&&s&&null!=(a=t[n])?a[o]:void 0},getNeighborNodes:function(t,e,n){var o,i,s,a,r,c,l,u,d,h,p,m;for(r=e.coords.x,c=e.coords.y,a=[],p=[[r+1,c],[r+1,c+1],[r+1,c-1],[r,c+1],[r,c-1],[r-1,c],[r-1,c+1],[r-1,c-1]],h=0;h<p.length;)l=p[h],u=l[0],d=l[1],o=this.isValidBoardAxis(u),i=this.isValidBoardAxis(d),o&&i&&(s=null!=(m=t[u])?m[d]:void 0,null!=s&&(null!=n?null!=n.selected&&s.selected===n.selected&&a.push(s):a.push(s))),h+=1;return a},isValidNextMove:function(t,e){var n,o,i,s,a,r;return null==t||t.selected===!1?!1:(n=Math.abs(t.coords.x-e.coords.x),o=Math.abs(t.coords.y-e.coords.y),(i=n+o===1)?(a=t.color===e.color,r=t.type===e.type,s=i&&(a||r)):!1)}}},o.$inject=n,t.exports=o},function(t,e,n){"use strict";n(1),angular.module("app").service("TimerService",n(59)),t.exports="TimerService"},function(t,e){"use strict";var n,o,i=function(t,e){return function(){return t.apply(e,arguments)}};n=["$log","$timeout"],o=function(t,e){var n;return n=function(){function t(t,e,n){this.duration=t,this.step=e,this.onTick=n,this.onChange=i(this.onChange,this),this.start=i(this.start,this),null==this.step&&(this.step=1e3),this.running=!1,this.remaining=null,this.timeout=null}return t.prototype.start=function(){var t,n;this.running||(this.running=!0,t=Date.now(),(n=function(o){return function(){var i;i=o.duration-parseInt((Date.now()-t)/1e3),i>0?o.timeout=e(n,o.step):(i=0,o.running=!1),o.remaining=o.parse(i),o.onChange()}}(this))())},t.prototype.onChange=function(){return"function"==typeof this.onTick?this.onTick(this.remaining):void 0},t.prototype.expired=function(){return this.running=!1},t.prototype.pause=function(){e.cancel(this.timeout),this.timeout=null,this.duration=this.remaining.total,this.running=!1},t.prototype.stop=function(){e.cancel(this.timeout),this.running=!1},t.prototype.parse=function(t){return{minutes:t/60|0,seconds:t%60|0,total:t}},t}()},o.$inject=n,t.exports=o},function(t,e){"use strict";var n,o;n=["$log","BOARD","SHAPE"],o=function(t,e,n){return o={getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},coinFlip:function(){var t;return t=o.getRandomInt(1,10)%2===0,t?!0:t?void 0:!1},hexToRgb:function(t){var e,n;return n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,t=t.replace(n,function(t,e,n,o){return e+e+n+n+o+o}),e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}}},o.$inject=n,t.exports=o},function(t,e){"use strict";var n,o;n=["$log"],o=function(t){var e;return e=function(){function t(t,e){this.scope=t,this.watching=null!=e?e:[]}return t.prototype.start=function(t,e){var n;return n=this.scope.$watchCollection(t,e,!0),this.watching.push(n),n},t.prototype.stopAll=function(){return $.each(this.watching,function(t,e){return"function"==typeof e?e():void 0}),this.watching=[]},t}()},o.$inject=n,t.exports=o},function(t,e,n){"use strict";n(1),angular.module("app").service("WindowEvents",n(63)),t.exports="WindowEvents"},function(t,e){"use strict";var n,o,i=function(t,e){return function(){return t.apply(e,arguments)}};n=["$log"],o=function(t){var e;return e=function(){function t(){this.onBlur=i(this.onBlur,this),this.onFocus=i(this.onFocus,this),this.eventCallbacks={focus:[],blur:[]},this.setupEvent()}return t.prototype.setupEvent=function(){var t,e,n;return t="hidden",e=function(e){return function(n){return e.onChange(n,t)}}(this),t in document?document.addEventListener("visibilitychange",e):(t="mozHidden")in document?document.addEventListener("mozvisibilitychange",e):(t="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",e):(t="msHidden")in document?document.addEventListener("msvisibilitychange",e):"onfocusin"in document?document.onfocusin=document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e,document.addEventListener("resume",e,!1),document.addEventListener("pause",e,!1),"undefined"!=typeof document[t]?(n=document[t]?"blur":"focus",e({type:n})):void 0},t.prototype.onChange=function(t,e){var n,o,i,s,a,r;a="visible",i="hidden",o={resume:a,focus:a,focusin:a,pageshow:a,pause:i,blur:i,focusout:i,pagehide:i},t=t||window.event,r=t.type in o?o[t.type]:(null!=t&&null!=(s=t.target)?s[e]:void 0)?"hidden":"visible",document.body.className=r,n="visible"===r?"focus":"blur",this.runCallbacks(n,t)},t.prototype.runCallbacks=function(t,e){this.eventCallbacks[t].forEach(function(t){return"function"==typeof t?t(e):void 0})},t.prototype.onFocus=function(t){this.eventCallbacks.focus.push(t)},t.prototype.onBlur=function(t){this.eventCallbacks.blur.push(t)},t}()},o.$inject=n,t.exports=o},function(t,e){"use strict";var n,o;n=["$log"],o=function(){function t(t){this.years={start:2015,current:(new Date).getFullYear()}}return t}(),o.$inject=n,t.exports=o},function(t,e){"use strict";var n;n=function(t){return t.state("about",{url:"/about",templateUrl:"views/about/about.html",controller:"AboutController",controllerAs:"about"})},n.$inject=["$stateProvider"],t.exports=n},function(t,e,n){"use strict";n(87),n(112),t.exports=angular.module("app.about",[]).config(n(65)).controller("AboutController",n(64))},function(t,e,n){"use strict";var o,i;o=["$log","$rootScope","$scope","$state","$localStorage","LEVELS",n(2)],i=function(){function t(t,e,n,o,i,s,a){this.isProd=!0,this.showTutorial=i.hasCompletedTutorial!==!0,this.levels=angular.copy(s),delete this.levels.DEFAULT,delete this.levels.DEV,this.selectedLevel=a.getDifficulty().toUpperCase(),this.setDifficulity=function(t){var e;return e=t.value,null!=this.levels[e]?a.setDifficulty(e):void 0},this.clearLocalStorage=function(){i.$reset(),o.go("home")},this.onSelectGame=function(t){return this.showTutorial?o.go("tutorial",{step:1}):o.go("play",{mode:t,difficulty:this.selectedLevel.toLowerCase()})}}return t}(),i.$inject=o,t.exports=i},function(t,e){"use strict";var n;n=function(t){return t.state("home",{url:"/",templateUrl:"views/home/home.html",controller:"HomeController",controllerAs:"home"})},n.$inject=["$stateProvider"],t.exports=n},function(t,e,n){"use strict";n(43),n(39),n(6),n(88),n(113),t.exports=angular.module("app.home",[]).config(n(68)).controller("HomeController",n(67))},function(t,e,n){"use strict";n(6),n(32),n(37),n(89),n(114),t.exports=angular.module("app.play",[]).config(n(72)).controller("PlayController",n(71))},function(t,e,n){"use strict";var o,i;o=["$log","$scope","$state","$localStorage",n(4),n(2)],i=function(){function t(t,e,n,o,i,s){var a,r,c,l;l=n.params.mode,a=n.params.difficulty,c=n.params.game,(null!=c?c.length:void 0)>0&&(r=i.convertStrToGame(c),(null!=r.maxMoves)>0&&2===r.endNodes.length&&r.board.length>0&&(this.gameCopy=angular.copy(r))),this.gameType=s.setGameType(l),this.difficulty=s.setDifficulty(a),o.hasCompletedTutorial!==!0&&n.go("tutorial",{step:1,mode:this.gameType}),this.pauseGame=!1,this.attempts=0,this.leaveGame=function(t){null==t.route&&(t.route="home"),n.go(t.route)},this.createNewGame=function(t){return function(){n.transitionTo(n.current,{mode:t.gameType,difficulty:t.difficulty},{reload:!0,inherit:!1,notify:!0})}}(this),this.resetGame=function(t){return function(){c=i.convertGameToStr(t.gameCopy),n.transitionTo(n.current,{game:c,mode:t.gameType,difficulty:t.difficulty},{reload:!0,inherit:!0,notify:!0})}}(this),this.triggerGamePause=function(t){return function(){t.pauseGame=!0}}(this),this.onShareEvent=function(t){return function(e){return"show"===e.type?(t.modal="share",t.pauseGame=!0):"close"===e.type?(t.modal="share",t.pauseGame=!1):void 0}}(this),e.$watch(function(t){return function(){return t.gameCopy}}(this),function(t){return function(e){var o;null!=e&&(o=i.convertGameToStr(e),o!==c&&(null==c||0===(null!=c?c.length:void 0))&&(c=o,n.transitionTo(n.current,{game:c,mode:t.gameType,difficulty:t.difficulty},{location:"replace",notify:!1})))}}(this))}return t}(),i.$inject=o,t.exports=i},function(t,e){"use strict";var n;n=function(t){return t.state("play",{url:"/play/:game?mode&difficulty",templateUrl:"views/play/play.html",controller:"PlayController",controllerAs:"play"})},n.$inject=["$stateProvider"],t.exports=n},function(t,e,n){"use strict";n(6),n(5),n(45),n(90),n(115),t.exports=angular.module("app.tutorial",[]).config(n(75)).controller("TutorialController",n(74))},function(t,e){"use strict";var n,o;n=["$scope","$log","$state","$interval","$localStorage","TUTORIAL_STEPS"],o=function(){function t(t,e,n,o,i,s){var a,r,c,l,u,d,h;d=parseInt(n.params.step,10),h=s.total+1,d>=1&&h>=d||n.go("tutorial",{step:1}),this.showSuccess=d===h,this.mode="tutorial",this.stepNum=d,this.step=angular.copy(s[this.stepNum]),this.endNodes=[],this.showSuccess&&(this.canvasSize={width:window.innerWidth,height:window.innerHeight},this.success=angular.copy(s.success),i.hasCompletedTutorial=!0),this.skip=function(t){return function(){i.hasCompletedTutorial=!0,n.go("play",{mode:"timed"})}}(this),l=function(t,e,n){var o;return null==t?t:(o=n.color+" "+n.type,t=t.replace(e,o))},t.$watch(function(t){return function(){return t.endNodes}}(this),function(t){return function(e){var n,o;if(null!=e&&0!==e.length)return o=e[0],n=e[1],t.step.header1=l(t.step.header1,"#{startNode}",o),t.step.header1=l(t.step.header1,"#{endNode}",n),t.step.header2=l(t.step.header2,"#{startNode}",o),t.step.header2=l(t.step.header2,"#{endNode}",n)}}(this)),c=function(t){return function(){return null!=t.stopAnimation&&o.cancel(t.stopAnimation),null!=t.canvas?(t.stopAnimation=t.canvas.draw.confettiAnimation({canvas:t.canvas.$el,totalParticles:"auto",radius:6,tilt:3}),t.stopAnimation):void 0}}(this),this.showSuccess&&(r=!0,a=t.$watch("tutorial.canvas",function(t){null!=(null!=t?t.draw:void 0)&&(this.canvas=t,c(),r&&(r=!1,u()))})),u=function(e){return function(){var n;return n=t.$watchCollection(function(){return[window.innerWidth,window.innerHeight]},function(t){e.canvasSize={width:t[0],height:t[1]}},!0)}}(this)}return t}(),o.$inject=n,t.exports=o},function(t,e){"use strict";var n;n=function(t){return t.state("tutorial",{url:"/tutorial/step/:step",params:{step:{value:"1"},mode:""},templateUrl:"views/tutorial/tutorial.html",controller:"TutorialController",controllerAs:"tutorial"})},n.$inject=["$stateProvider"],t.exports=n},,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){t.exports=n.p+"manifest.json"},function(t,e,n){t.exports=n.p+"assets/sound/add2.14589cd6cea1b8064c2185772e535ba8.wav"},function(t,e,n){t.exports=n.p+"assets/sound/bad2.399b00e8d488032e3c5c23c6134b58a9.wav"},function(t,e,n){t.exports=n.p+"assets/sound/carefree.f841806df7af1b769829bd8b9f133bf1.mp3"},function(t,e,n){t.exports=n.p+"assets/sound/lose1.62ac64ddaa9c5499b5f8287581651f45.wav"},function(t,e,n){t.exports=n.p+"assets/sound/undo3.33587fe23264b3994cbf6b7f5610a978.wav"},function(t,e,n){t.exports=n.p+"assets/sound/win1.9ab10cdd633b2e64dd89f235802900bb.wav"},function(t,e,n){t.exports=n.p+"assets/images/gameplay-mini.glow.copy.8619b69ba54a587bfd1d76cb8bf54a61.gif"},function(t,e,n){t.exports=n.p+"assets/images/logo-gradient-512.7850a0bbfa410960c0fd5918df57ae7e.png"},,function(t,e,n){var o,i,s;!function(a,r){"use strict";i=[n(1)],o=r,s="function"==typeof o?o.apply(e,i):o,!(void 0!==s&&(t.exports=s))}(this,function(t){"use strict";function e(t,e){var n;try{n=t[e]}catch(o){n=!1}if(n){var i="__"+Math.round(1e7*Math.random());try{t[e].setItem(i,i),t[e].removeItem(i,i)}catch(o){n=!1}}return n}function n(n){var o=e(window,n);return function(){var i="ngStorage-";this.setKeyPrefix=function(t){if("string"!=typeof t)throw new TypeError("[ngStorage] - "+n+"Provider.setKeyPrefix() expects a String.");i=t};var s=t.toJson,a=t.fromJson;this.setSerializer=function(t){if("function"!=typeof t)throw new TypeError("[ngStorage] - "+n+"Provider.setSerializer expects a function.");s=t},this.setDeserializer=function(t){if("function"!=typeof t)throw new TypeError("[ngStorage] - "+n+"Provider.setDeserializer expects a function.");a=t},this.supported=function(){return!!o},this.get=function(t){return o&&a(o.getItem(i+t))},this.set=function(t,e){return o&&o.setItem(i+t,s(e))},this.remove=function(t){o&&o.removeItem(i+t)},this.$get=["$rootScope","$window","$log","$timeout","$document",function(o,r,c,l,u){var d,h,p=i.length,m=e(r,n),f=m||(c.warn("This browser does not support Web Storage!"),{setItem:t.noop,getItem:t.noop,removeItem:t.noop}),v={$default:function(e){for(var n in e)t.isDefined(v[n])||(v[n]=t.copy(e[n]));return v.$sync(),v},$reset:function(t){for(var e in v)"$"===e[0]||delete v[e]&&f.removeItem(i+e);return v.$default(t)},$sync:function(){for(var t,e=0,n=f.length;n>e;e++)(t=f.key(e))&&i===t.slice(0,p)&&(v[t.slice(p)]=a(f.getItem(t)))},$apply:function(){var e;if(h=null,!t.equals(v,d)){e=t.copy(d),t.forEach(v,function(n,o){t.isDefined(n)&&"$"!==o[0]&&(f.setItem(i+o,s(n)),delete e[o])});for(var n in e)f.removeItem(i+n);d=t.copy(v)}},$supported:function(){return!!m}};return v.$sync(),d=t.copy(v),o.$watch(function(){h||(h=l(v.$apply,100,!1))}),r.addEventListener&&r.addEventListener("storage",function(e){if(e.key){var n=u[0];n.hasFocus&&n.hasFocus()||i!==e.key.slice(0,p)||(e.newValue?v[e.key.slice(p)]=a(e.newValue):delete v[e.key.slice(p)],d=t.copy(v),o.$apply())}}),r.addEventListener&&r.addEventListener("beforeunload",function(){v.$apply()}),v}]}}return t=t&&t.module?t:window.angular,t.module("ngStorage",[]).provider("$localStorage",n("localStorage")).provider("$sessionStorage",n("sessionStorage"))})},function(t,e){var n="components/canvas/canvas.html",o='<canvas ng-class="[canvasName, classes]"></canvas>';window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="components/game/game.html",o='<div class=game ng-class="{\'won\': game.won == true, \'lost\': game.lost == true, \'not-initload\': isFirstInit == false}"><div class=game-header><sc:canvas classes=game-goal name=goal size={{canvasDimensions.goal}} canvas=canvasCollection.goal></sc:canvas><sc:canvas ng-show="game.hasTimer == true" classes=game-timer name=timer size={{canvasDimensions.timer}} canvas=canvasCollection.timer></sc:canvas></div><div class=game-board><sc:canvas classes=game-board-game_canvas name=game size={{canvasDimensions.board}} canvas=canvasCollection.game events=gameCanvasEvents></sc:canvas><sc:canvas classes=game-board-lines_canvas name=lines size={{canvasDimensions.board}} canvas=canvasCollection.lines></sc:canvas></div></div><sc:modal name=pauseModal show=showPauseModal style=blue position=center><div class="game-pause_modal game-modal"><div class=game-pause_modal-controls><a sc:modal:action=close on-complete="actions.resumeGame( e )" class="btn type-primary play-btn">Resume</a> <a sc:modal:action=close on-complete="actions.resetGame( e )" class="btn type-secondary restart-btn">Restart</a> <a sc:modal:action=close on-complete="actions.newGame( e )" class="btn type-secondary skip-btn">Skip</a> <a sc:modal:action=close on-complete=actions.quitGame() class="btn type-text">Main Menu</a></div><div class=game-pause_modal-settings><sc:noise-toggles></sc:noise-toggles></div></div></sc:modal><sc:modal name=winModal show=showWinModal style=teal position=center><div class="game-win_modal game-modal"><span class=modal-content-header>Awesome!</span> <span class=modal-content-subtext>Solved <span ng-if="game.mode == \'timed\'">in <span class=weight-normal>{{game.solveTime}}s</span></span> on <span class=weight-normal>{{attempts | ordinal}}</span> attempt</span><div class=game-modal-main_btns><a sc:modal:action=minimize class="btn type-secondary">See gameboard</a> <a sc:modal:action=close on-complete=actions.newGame() class="btn type-primary addon-arrow">Next Puzzle</a></div><a sc:modal:action=close on-complete=actions.quitGame() class="btn type-text">Main Menu</a></div><div class=scmodal-minimized-content><a sc:modal:action=close on-complete=actions.quitGame() no-delay class="btn float-left type-text">Main Menu</a> <a sc:modal:action=close on-complete=actions.newGame() no-delay class="btn float-right type-primary addon-arrow">Next Puzzle</a></div></sc:modal><sc:modal name=loseModal show=showLoseModal style=red position=center><div class="game-lose_modal game-modal"><span class=modal-content-header>Time&rsquo;s up!</span><div class=game-modal-main_btns><a sc:modal:action=close on-complete="actions.resetGame( e )" class="btn type-secondary">Try again?</a> <a sc:modal:action=close on-complete="actions.newGame( e )" class="btn type-primary addon-arrow">New Puzzle</a></div><a sc:modal:action=close on-complete="actions.quitGame( e )" class="btn type-text">Main Menu</a></div></sc:modal>';window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="components/header/header.html",o='<div class=app-header><div ng-if="showMenuIcon === true" class=menu ng-click="onLogoClick( e )"><div class=menu-middle></div></div><div ng-if=showAppLogo class=logo-container ng-click="onLogoClick( e )"><div class="logo small"></div><div class="logomark small"><span class="light faded">Shape</span>Connector</div></div><div ng-if=showSoundsIcon class=music-link ng-class="[{\'on\': isMusicOn, \'off\': !isMusicOn }]" ng-click=openSoundsModal()><div class=icon></div></div><div ng-transclude></div><share ng-if=showShareLink event-handler="shareEvent( params )" opts=shareOpts></share><sc:modal name=soundsModal show=showSoundsModal style=blue position=center height=170><div class=sounds-modal><sc:noise-toggles></sc:noise-toggles><div class=sounds-modal-actions><a sc:modal:action=close on-complete="onSoundsModalEvent(\'close\')" class="btn type-primary">OK</a></div></div></sc:modal></div>';window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="components/modal/modal.html",o="<div class=modal data-name={{name}} ng-class=\"[\n	style,\n	animateVisibility,\n	animateMinimize,\n	{'is-animating': isAnimating === true},\n	{shown: showModal == true},\n	{hidden: showModal == false}\n]\" ng-show=showModal><div class=modal-overlay></div><div class=modal-content></div><div class=modal-minimized></div></div>";window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="components/noiseToggles/noiseToggles.html",o='<div class=noise-toggles><div ng-repeat="(key, noise) in ::noises" ng-click="toggleNoise( key )" class=toggle ng-class="{\'on\': noise.allowed}">{{noise.label}}</div></div>';window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="components/selectbox/selectbox.html",o='<div class=selectbox><span class=icon></span><select ng-model=selectbox.model ng-options="key as option.label for (key, option) in selectbox.options" ng-change="selectbox.onChange( $event, key )"></select></div>';window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="components/share/share.html",o='<div class=share-link ng-click=share.onLinkClick()></div><sc:modal name=shareModal show=share.showModal style=blue position=center><div class=share-modal><span class=modal-content-header>Share</span> <span class=modal-content-subtext>Copy the link below to share this gameboard</span> <input class=share-modal-input ng-value=::share.gameLink readonly ng-click=share.selectAll() ng-focus=share.selectAll() ng-blur="share.selectAll()"><div class=share-modal-actions><a sc:modal:action=close on-complete="share.onModalEvent(\'close\')" class="btn type-primary">OK</a></div></div></sc:modal>';window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="components/slideshow/slide.html",o='<div class=slideshow-slide ng-class=[slide.direction] ng-show="slide.isShown === true" ng-transclude></div>';window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="components/slideshow/slideshow.html",o="<div class=slideshow data-name={{name}} ng-class=\"[slideshow.style, slideshow.directionClass]\"><div ng-transclude class=slideshow-slides ng-swipe-right=\"slideshow.goTo('prev', 'swipe')\" ng-swipe-left=\"slideshow.goTo('next', 'swipe')\" ng-click=\"slideshow.goTo('next', 'click' )\"></div><div class=slideshow-pages><span ng-repeat=\"slide in slideshow.slides\" ng-click=\"slideshow.goTo( $index, 'click' )\" class=slideshow-page ng-class=\"[\n				{selected: slide.isShown == true}\n			]\"></span></div></div>";window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="components/tutorial/tutorial.html",o='<div class=game><div class=game-header ng-show="step.showGoal === true"><sc:canvas classes=game-goal name=goal size={{canvasDimensions.goal}} canvas=canvasCollection.goal></sc:canvas></div><div class=game-board><sc:canvas classes=game-board-game_canvas name=game size={{canvasDimensions.board}} canvas=canvasCollection.game events=gameCanvasEvents></sc:canvas><sc:canvas classes=game-board-lines_canvas name=lines size={{canvasDimensions.board}} canvas=canvasCollection.lines></sc:canvas></div></div>';window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="views/about/about.html",o='<div class="about-view app-view"><app:header show-sounds=true></app:header><div class=about-view-content><div class=header>About</div><p class=info>ShapeConnector is a simple puzzle game, where the goal is to get from Point A to Point B in exactly X number of moves.</p><div class=sub-header>Created by <a href=https://twitter.com/thalidanoel>@thalidanoel</a></div><div class=sub-header>Found a bug?</div><a class=info href=https://github.com/thalida/ShapeConnector/issues>Report it</a><div class=sub-header>Curious?</div><a class=info href=https://github.com/thalida/ShapeConnector>Available on GitHub</a><div class=sub-header>Music</div><p class=info>&ldquo;Carefree&rdquo; by Kevin MacLeod (<a target=_blank href=http://incompetech.com>incompetech.com</a>)</p><p class=info>Licensed under Creative Commons: By Attribution 3.0 <a target=_blank href="http://creativecommons.org/licenses/by/3.0/">Learn more</a></p><div class=sub-header>Sounds</div><p class=info>Generated using <a target=_blank href="http://www.superflashbros.net/as3sfxr/">as3sfxr</a></p><div class=sub-header>License</div><p class=info>{{about.years.start}}-{{about.years.current}} Thalida Noel</p><p class=info>Code licensed under GPLv3</p></div></div>';window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="views/home/home.html",o='<app:header on-click=play.onHeaderClick() show-logo=false show-sounds=true></app:header><div class="home-view app-view" ng-class="[\n	{\'is-onboarding\': home.showTutorial === true}\n]"><div class=home-view-content><div class=logo-container><span class="logo medium" ng-if="home.showTutorial === true"></span> <span class="logo large" ng-if="home.showTutorial === false"></span> <span class=logomark><span class=light>Shape</span>Connector</span></div><div ng-if="::home.showTutorial === true"><slideshow><slide><div class="image gameplay" title="ShapeConnector game play demo"></div><div class=slideshow-slide-subheader>Connect similar shapes&hellip;</div></slide><slide><div class="image win" title="Game won popup"></div><div class=slideshow-slide-subheader>Keep trying until you win!</div></slide><slide><div class="image share" title="Share ShapeConnector game boards!"></div><div class=slideshow-slide-subheader>Share the board you&rsquo;re playing</div></slide></slideshow><div class=btn-container><a ng-click=home.onSelectGame() class="btn type-primary">Play</a></div></div><div ng-if="::home.showTutorial === false"><selectbox options=home.levels model=home.selectedLevel on-change="home.setDifficulity( params )"></selectbox><div class=btn-container><a ng-click="home.onSelectGame(\'timed\')" class="btn type-primary">Timed</a> <a ng-click="home.onSelectGame(\'freeplay\')" class="btn type-secondary">Freeplay</a></div><div class=secondary-actions><a class="action btn type-text" ui-sref="tutorial({step: 1})">Tutorial</a> <a class="action btn type-text" ui-sref=about>About</a></div></div></div></div>';window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="views/play/play.html",o='<div class="play-view app-view"><app:header on-share-event="play.onShareEvent( params )" show-share=true show-menu=false show-logo=false share-opts=play.shareOpts><div class=play-view_header-controls><span class="control pause" ng-click=play.triggerGamePause()><span class=icon title="Pause Game"></span></span> <span class="control restart" ng-click=play.resetGame()><span class=icon title="Restart Game"></span></span> <span class="control skip" ng-click=play.createNewGame()><span class=icon title="Create Game"></span></span></div></app:header><sc:game type={{play.gameType}} difficulty={{play.difficulty}} attempts=play.attempts source-game=play.gameCopy pause-game=play.pauseGame modal-shown=play.modal on-new-game=play.createNewGame(params) on-reset-game=play.resetGame(params) on-quit-game=play.leaveGame(params)></sc:game></div>';window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n},function(t,e){var n="views/tutorial/tutorial.html",o='<div class="tutorial-view app-view" ng-class="[{\'success\': tutorial.showSuccess === true}]"><app:header show-sounds=true></app:header><div class="step step{{tutorial.stepNum}}" ng-if="tutorial.showSuccess == false"><span class=step-header>{{tutorial.step.header1}}</span> <span class=step-header2>{{tutorial.step.header2}}</span><sc:tutorial step={{tutorial.stepNum}} end-nodes=tutorial.endNodes></sc:tutorial><a class=step-skip ng-if="tutorial.stepNum === 1" ng-click=tutorial.skip()>Skip Tutorial</a></div><div class=success ng-if="tutorial.showSuccess == true"><span class=step-header>{{tutorial.success.header1}}</span> <span class=step-header2>{{tutorial.success.header2}}</span> <span class="success-button btn type-primary" ui-sref=play({mode:tutorial.playMode})>{{tutorial.success.playBtnLabel}}</span></div><sc:canvas ng-if="tutorial.showSuccess == true" classes=tutorial-view-confetti_canvas name=confetti size={{tutorial.canvasSize}} canvas=tutorial.canvas></sc:canvas></div>';window.angular.module("ng").run(["$templateCache",function(t){t.put(n,o)}]),t.exports=n}]);